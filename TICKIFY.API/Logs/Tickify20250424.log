2025-04-24 16:27:08.245 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 16:27:08.365 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 16:27:08.381 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 16:27:08.396 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 16:27:08.433 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 16:27:08.475 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 16:27:08.480 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 16:27:09.042 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:27:09.078 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:27:09.107 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:27:09.163 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:27:09.305 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:27:09.337 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:27:09.578 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);
2025-04-24 16:27:09.661 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:27:09.670 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:27:09.692 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);
2025-04-24 16:27:09.701 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 16:27:09.936 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 16:27:10.026 +02:00 [INF] Creating key {88e84a69-ef5d-4484-9fab-38c5f8f8ce1d} with creation date 2025-04-24 14:27:10Z, activation date 2025-04-24 14:27:09Z, and expiration date 2025-07-23 14:27:09Z.
2025-04-24 16:27:10.048 +02:00 [INF] Writing data to file 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys\key-88e84a69-ef5d-4484-9fab-38c5f8f8ce1d.xml'.
2025-04-24 16:27:10.070 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 16:27:10.300 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 16:27:10.432 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 16:27:10.439 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 16:27:10.447 +02:00 [INF] Hosting environment: Development
2025-04-24 16:27:10.453 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 16:39:53.158 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 16:39:53.344 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 16:39:53.369 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 16:39:53.382 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 16:39:53.429 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 16:39:53.475 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 16:39:53.492 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 16:39:54.495 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:39:54.705 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:39:54.753 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:39:54.860 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:39:55.204 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:39:55.351 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:39:55.362 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 16:39:55.679 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 16:39:55.762 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 16:39:56.018 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 16:39:56.346 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 16:39:56.518 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 16:39:56.523 +02:00 [INF] Hosting environment: Development
2025-04-24 16:39:56.546 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 16:39:59.595 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 16:40:00.534 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 960.5265ms
2025-04-24 16:40:00.537 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 16:40:00.584 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 16:40:00.654 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 70.4047ms
2025-04-24 16:40:00.888 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 351.8186ms
2025-04-24 16:40:01.235 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 16:40:01.308 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/favicon-32x32.png - null null
2025-04-24 16:40:01.365 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-24 16:40:01.375 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/favicon-32x32.png - 200 628 image/png 67.9016ms
2025-04-24 16:40:01.453 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Driver/{id}" for actions - TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API),TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 16:40:01.530 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 295.6816ms
2025-04-24 16:42:43.261 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 16:42:43.489 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 16:42:43.513 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 16:42:43.532 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 16:42:43.592 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 16:42:43.635 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 16:42:43.644 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 16:42:44.193 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:42:44.237 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:42:44.263 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:42:44.326 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 16:42:44.463 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:42:44.572 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 16:42:44.586 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 16:42:44.822 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 16:42:44.891 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 16:42:45.056 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 16:42:45.316 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 16:42:45.414 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 16:42:45.421 +02:00 [INF] Hosting environment: Development
2025-04-24 16:42:45.436 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 16:42:46.314 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 16:42:46.867 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 576.9314ms
2025-04-24 16:42:46.880 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 16:42:46.903 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 16:42:46.948 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 34.4488ms
2025-04-24 16:42:47.035 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 156.3588ms
2025-04-24 16:42:47.555 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 16:42:47.893 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 338.3444ms
2025-04-24 16:45:03.864 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/3 - null null
2025-04-24 16:45:04.050 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 16:45:04.069 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 16:45:04.077 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/3 - 401 0 null 212.4354ms
2025-04-24 16:45:42.698 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 98
2025-04-24 16:45:42.753 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-24 16:45:42.763 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-24 16:45:42.772 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 405 0 null 73.7237ms
2025-04-24 16:45:59.406 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/4/rooms - null null
2025-04-24 16:45:59.439 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 16:45:59.448 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 16:45:59.454 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/4/rooms - 401 0 null 48.1548ms
2025-04-24 16:48:00.057 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - application/json 44
2025-04-24 16:48:00.093 +02:00 [INF] CORS policy execution successful.
2025-04-24 16:48:00.099 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 16:48:00.163 +02:00 [INF] Route matched with {action = "AddRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleAsync(TICKIFY.API.Contracts.Logging.AssignRoleReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 16:48:00.213 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API) in 14.4542ms
2025-04-24 16:48:00.228 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 16:48:00.245 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TICKIFY.API.Services.Abstracts.IAuthService' while attempting to activate 'TICKIFY.API.Controllers.AccountController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method71(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 16:48:00.343 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - 500 null text/plain; charset=utf-8 286.3531ms
2025-04-24 16:48:15.879 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 140
2025-04-24 16:48:15.907 +02:00 [INF] CORS policy execution successful.
2025-04-24 16:48:15.912 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 16:48:15.933 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 16:48:15.944 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 1.4415ms
2025-04-24 16:48:15.957 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 16:48:15.966 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TICKIFY.API.Services.Abstracts.IAuthService' while attempting to activate 'TICKIFY.API.Controllers.AccountController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method79(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 16:48:15.993 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 114.0988ms
2025-04-24 16:48:35.012 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - null 0
2025-04-24 16:48:35.035 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 16:48:35.044 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 16:48:35.058 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 1.1588ms
2025-04-24 16:48:35.065 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 16:48:35.074 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TICKIFY.API.Services.Abstracts.IAuthService' while attempting to activate 'TICKIFY.API.Controllers.AccountController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method79(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 16:48:35.097 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 85.3316ms
2025-04-24 17:02:33.622 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:02:33.927 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:02:33.970 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:02:33.991 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:02:34.057 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:02:34.143 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:02:34.160 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:02:35.284 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:02:35.352 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:02:35.376 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:02:35.440 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:02:35.622 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:02:35.849 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:02:35.863 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:02:36.275 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:02:36.441 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:02:36.772 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:02:37.378 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:02:37.555 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:02:37.561 +02:00 [INF] Hosting environment: Development
2025-04-24 17:02:37.578 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:02:38.441 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:02:39.330 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 911.6374ms
2025-04-24 17:02:39.341 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:02:39.377 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:02:39.418 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 40.4937ms
2025-04-24 17:02:39.501 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 160.6841ms
2025-04-24 17:02:39.755 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:02:40.128 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 373.1849ms
2025-04-24 17:02:45.967 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - null 0
2025-04-24 17:02:46.183 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:02:46.298 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:02:46.480 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-24 17:02:46.577 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 252.3225ms
2025-04-24 17:02:46.589 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:02:46.605 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 415 null application/problem+json; charset=utf-8 637.2075ms
2025-04-24 17:04:19.737 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 127
2025-04-24 17:04:19.782 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:04:19.791 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:04:20.261 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:04:20.318 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:04:20.363 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:04:20.376 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 569.5848ms
2025-04-24 17:04:20.388 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:04:20.414 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 677.1052ms
2025-04-24 17:04:37.442 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 130
2025-04-24 17:04:37.465 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:04:37.472 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:04:37.525 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:04:37.546 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:04:38.096 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:04:38.868 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:04:38.994 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:04:39.090 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:04:39.130 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:04:39.251 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:04:39.517 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:04:39.679 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 17:04:39.789 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 17:04:40.693 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 3207.9149ms
2025-04-24 17:04:40.705 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:04:40.721 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 135
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:04:40.871 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 3429.7364ms
2025-04-24 17:06:53.237 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:06:53.694 +02:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:06:53.741 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:06:53.764 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:06:53.858 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:06:53.955 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:06:53.975 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:06:55.727 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:06:55.862 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:06:55.909 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:06:56.032 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:06:56.411 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:06:56.604 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:06:56.622 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:06:57.320 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:06:57.539 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:06:58.019 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:06:58.581 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:06:58.940 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:06:58.950 +02:00 [INF] Hosting environment: Development
2025-04-24 17:06:58.956 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:06:59.647 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:07:00.622 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 1024.2382ms
2025-04-24 17:07:00.693 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:07:00.733 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 42.0208ms
2025-04-24 17:07:00.787 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:07:00.980 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 193.0587ms
2025-04-24 17:07:01.319 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:07:01.837 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 517.6997ms
2025-04-24 17:07:12.579 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 130
2025-04-24 17:07:12.988 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:07:13.083 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:07:13.110 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:07:13.244 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:07:13.867 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:07:14.083 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:07:14.109 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 837.164ms
2025-04-24 17:07:14.122 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:07:14.150 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 1570.8388ms
2025-04-24 17:07:37.008 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 133
2025-04-24 17:07:37.048 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:07:37.062 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:07:37.071 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:07:37.082 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:07:37.131 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:07:37.213 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:07:37.802 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:07:38.268 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:07:38.336 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:07:38.425 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:07:38.463 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:07:38.553 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:07:38.754 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:07:38.894 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 17:07:38.983 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 17:07:39.872 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 2773.6518ms
2025-04-24 17:07:39.882 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:07:39.895 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 135
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:07:39.982 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 2974.2015ms
2025-04-24 17:09:51.812 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:09:52.147 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:09:52.189 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:09:52.211 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:09:52.293 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:09:52.371 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:09:52.384 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:09:53.441 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:09:53.536 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:09:53.579 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:09:53.675 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:09:53.967 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:09:54.161 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:09:54.180 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:09:54.739 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:09:54.895 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:09:55.218 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:09:55.827 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:09:56.113 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:09:56.124 +02:00 [INF] Hosting environment: Development
2025-04-24 17:09:56.139 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:09:56.944 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:09:58.041 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:09:58.039 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 1135.7248ms
2025-04-24 17:09:58.138 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:09:58.189 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 50.7442ms
2025-04-24 17:09:58.306 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 266.6148ms
2025-04-24 17:09:58.626 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:09:59.183 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 556.6226ms
2025-04-24 17:10:17.545 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 135
2025-04-24 17:10:17.951 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:10:18.037 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:10:18.061 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:10:18.173 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:10:18.785 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:10:18.865 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:10:19.380 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:10:20.090 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:10:20.207 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:10:20.304 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:10:20.340 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:10:20.429 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:10:20.624 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:10:20.778 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 17:10:20.874 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 17:10:21.811 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 3607.3618ms
2025-04-24 17:10:21.824 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:10:21.848 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 135
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:10:21.961 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 4416.6184ms
2025-04-24 17:14:59.115 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:14:59.460 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:14:59.508 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:14:59.531 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:14:59.603 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:14:59.693 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:14:59.715 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:15:01.082 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:15:01.178 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:15:01.227 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:15:01.364 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:15:01.736 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:15:01.965 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:15:01.987 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:15:02.659 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:15:02.828 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:15:03.213 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:15:03.840 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:15:04.071 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:15:04.104 +02:00 [INF] Hosting environment: Development
2025-04-24 17:15:04.119 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:15:05.333 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:15:06.335 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 1036.2631ms
2025-04-24 17:15:06.396 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:15:06.429 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 34.2466ms
2025-04-24 17:15:06.472 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:15:06.634 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 162.4794ms
2025-04-24 17:15:07.040 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:15:07.453 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 412.8543ms
2025-04-24 17:15:11.627 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 137
2025-04-24 17:15:12.001 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:15:12.094 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:15:12.116 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:15:12.216 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:15:12.788 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:15:12.848 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:15:13.433 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:15:14.087 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:15:14.192 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:15:14.282 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:15:14.320 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:15:14.404 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:15:14.588 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:15:15.901 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 3652.0534ms
2025-04-24 17:15:15.917 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:15:15.940 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'JWT SecretKey cannot be null or empty.')
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 120
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:15:16.039 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 4411.983ms
2025-04-24 17:23:59.526 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 120
2025-04-24 17:23:59.543 +02:00 [INF] CORS policy execution successful.
2025-04-24 17:23:59.547 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:23:59.549 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:23:59.577 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:23:59.586 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:23:59.596 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:23:59.600 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 48.0894ms
2025-04-24 17:23:59.603 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:23:59.605 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 78.3715ms
2025-04-24 17:24:14.849 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 124
2025-04-24 17:24:14.856 +02:00 [INF] CORS policy execution successful.
2025-04-24 17:24:14.859 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:24:14.862 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:24:14.875 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:24:14.880 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:24:14.884 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:24:14.885 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 21.1653ms
2025-04-24 17:24:14.887 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:24:14.888 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 39.622ms
2025-04-24 17:24:29.877 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 127
2025-04-24 17:24:29.885 +02:00 [INF] CORS policy execution successful.
2025-04-24 17:24:29.888 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:24:29.890 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:24:29.898 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:24:29.903 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:24:29.976 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:24:29.982 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:24:29.990 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:24:29.994 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:24:29.997 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:24:30.002 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:24:30.007 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:24:30.156 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 261.8145ms
2025-04-24 17:24:30.160 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:24:30.163 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'JWT SecretKey cannot be null or empty.')
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 120
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:24:30.171 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 294.1078ms
2025-04-24 17:33:06.672 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:33:06.756 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:33:06.770 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:33:06.775 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:33:06.790 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:33:06.812 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:33:06.817 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:33:07.106 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:33:07.125 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:33:07.135 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:33:07.158 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:33:07.228 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:33:07.272 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:33:07.276 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:33:07.403 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:33:07.439 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:33:07.524 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:33:07.665 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:33:07.714 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:33:07.719 +02:00 [INF] Hosting environment: Development
2025-04-24 17:33:07.726 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:33:08.192 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:33:08.454 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 272.5524ms
2025-04-24 17:33:08.461 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:33:08.469 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:33:08.483 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 13.6653ms
2025-04-24 17:33:08.520 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.5463ms
2025-04-24 17:33:08.572 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:33:08.676 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.0592ms
2025-04-24 17:33:12.834 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 137
2025-04-24 17:33:12.923 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:33:12.953 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:33:12.961 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:12.986 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:33:13.091 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:33:13.137 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:33:13.144 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 150.7724ms
2025-04-24 17:33:13.148 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:13.154 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 319.9683ms
2025-04-24 17:33:22.323 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 138
2025-04-24 17:33:22.331 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:33:22.336 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:33:22.338 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:22.339 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:33:22.349 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:33:22.359 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:33:22.366 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:33:22.367 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 25.4884ms
2025-04-24 17:33:22.371 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:22.373 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 50.6972ms
2025-04-24 17:33:29.045 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 139
2025-04-24 17:33:29.054 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:33:29.057 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken'.
2025-04-24 17:33:29.060 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:29.062 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:33:29.080 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:33:29.087 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:33:29.180 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:33:29.280 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:33:29.301 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:33:29.321 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:33:29.329 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:33:29.346 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:33:29.394 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:33:29.746 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 680.8796ms
2025-04-24 17:33:29.748 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:29.752 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'JWT SecretKey cannot be null or empty.')
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 120
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:33:29.768 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 723.1822ms
2025-04-24 17:33:58.087 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 139
2025-04-24 17:33:58.098 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:33:58.101 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 17:33:58.103 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:58.104 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:33:58.110 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:33:58.117 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:33:58.119 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 11.7843ms
2025-04-24 17:33:58.121 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:33:58.122 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 35.8853ms
2025-04-24 17:35:00.109 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:35:00.185 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:35:00.197 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:35:00.202 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:35:00.215 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:35:00.234 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:35:00.239 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:35:00.493 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:35:00.512 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:35:00.521 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:35:00.544 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:35:00.619 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:35:00.666 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:35:00.670 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:35:00.802 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:35:00.832 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:35:00.928 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:35:01.064 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:35:01.107 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:35:01.110 +02:00 [INF] Hosting environment: Development
2025-04-24 17:35:01.112 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:35:01.425 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:35:01.643 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 224.442ms
2025-04-24 17:35:01.649 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:35:01.651 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:35:01.669 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 17.9712ms
2025-04-24 17:35:01.693 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.4373ms
2025-04-24 17:35:01.746 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:35:01.835 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.5586ms
2025-04-24 17:35:15.088 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 141
2025-04-24 17:35:15.172 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:35:15.195 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 17:35:15.202 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:35:15.224 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:35:15.325 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:35:15.341 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:35:15.430 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:35:15.558 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:35:15.579 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:35:15.599 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:35:15.608 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:35:15.623 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:35:15.659 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:35:15.876 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 645.6277ms
2025-04-24 17:35:15.882 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:35:15.887 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'JWT SecretKey cannot be null or empty.')
   at TICKIFY.API.Services.Implementations.AuthService.CreateJwtToken(ApplicationUser user) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 120
   at TICKIFY.API.Services.Implementations.AuthService.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\AuthService.cs:line 63
   at TICKIFY.API.Controllers.AccountController.RegisterAsync(RegisterReq model) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\AccountController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-24 17:35:15.906 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 500 null text/plain; charset=utf-8 818.2073ms
2025-04-24 17:50:31.503 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:50:31.583 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:50:31.595 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 17:50:31.600 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 17:50:31.616 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 17:50:31.637 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 17:50:31.642 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 17:50:31.908 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:50:31.929 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:50:31.940 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:50:31.964 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 17:50:32.037 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:50:32.088 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:50:32.093 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 17:50:32.254 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 17:50:32.287 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 17:50:32.363 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 17:50:32.524 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 17:50:32.569 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 17:50:32.579 +02:00 [INF] Hosting environment: Development
2025-04-24 17:50:32.581 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 17:50:33.183 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 17:50:33.421 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 247.6584ms
2025-04-24 17:50:33.426 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 17:50:33.432 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 17:50:33.451 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 18.8572ms
2025-04-24 17:50:33.479 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.38ms
2025-04-24 17:50:33.522 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 17:50:33.619 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.2099ms
2025-04-24 17:50:45.432 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 143
2025-04-24 17:50:45.519 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:50:45.545 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 17:50:45.550 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:50:45.573 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:50:45.680 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 17:50:45.695 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:50:45.785 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:50:45.916 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 17:50:45.937 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:50:45.956 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:50:45.964 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:50:45.980 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:50:46.013 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:50:46.041 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 17:50:46.062 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 17:50:46.081 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Auth.AuthRes'.
2025-04-24 17:50:46.093 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 513.2771ms
2025-04-24 17:50:46.097 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 17:50:46.103 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 200 null application/json; charset=utf-8 671.1361ms
2025-04-24 17:51:37.374 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/5/drivers - null null
2025-04-24 17:51:37.389 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 17:51:37.392 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 17:51:37.400 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 17:51:37.408 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 17:51:37.411 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/5/drivers - 401 0 null 37.3837ms
2025-04-24 17:51:50.271 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/5/drivers - null null
2025-04-24 17:51:50.290 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 17:51:50.292 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 17:51:50.294 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/5/drivers - 401 0 null 22.8304ms
2025-04-24 17:52:00.282 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/5/drivers - null null
2025-04-24 17:52:00.291 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 17:52:00.294 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 17:52:00.298 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/5/drivers - 401 0 null 15.873ms
2025-04-24 17:52:26.553 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - null null
2025-04-24 17:52:26.562 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 17:52:26.568 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 17:52:26.570 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - 401 0 null 17.075ms
2025-04-24 17:52:38.693 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - null null
2025-04-24 17:52:38.704 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 17:52:38.706 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 17:52:38.707 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - 401 0 null 14.4184ms
2025-04-24 17:56:08.328 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - null null
2025-04-24 17:56:08.357 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-24 17:56:08.365 +02:00 [INF] Route matched with {action = "GetHotelsByLocationAndRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByLocationAndRating(System.String, Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-24 17:56:08.406 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-04-24 17:56:08.426 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-24 17:56:08.539 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TICKIFY.Data.Entities.Hotels, TICKIFY.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TICKIFY.API.Contracts.hotels.HotelRes, TICKIFY.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-24 17:56:08.557 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API) in 187.5554ms
2025-04-24 17:56:08.561 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-24 17:56:08.563 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - 200 null application/json; charset=utf-8 235.7093ms
2025-04-24 17:56:23.299 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 98
2025-04-24 17:56:23.305 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-24 17:56:23.309 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-24 17:56:23.310 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 405 0 null 11.2807ms
2025-04-24 17:56:36.552 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - application/json 44
2025-04-24 17:56:36.561 +02:00 [INF] CORS policy execution successful.
2025-04-24 17:56:36.564 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 17:56:36.571 +02:00 [INF] Route matched with {action = "AddRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleAsync(TICKIFY.API.Contracts.Logging.AssignRoleReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:56:36.590 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-04-24 17:56:36.594 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 17:56:36.597 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API) in 22.7292ms
2025-04-24 17:56:36.600 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 17:56:36.601 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - 400 null text/plain; charset=utf-8 49.0696ms
2025-04-24 17:57:02.541 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - null 0
2025-04-24 17:57:02.547 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 17:57:02.549 +02:00 [INF] Route matched with {action = "AddRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleAsync(TICKIFY.API.Contracts.Logging.AssignRoleReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:57:02.562 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-24 17:57:02.579 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API) in 26.8152ms
2025-04-24 17:57:02.583 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 17:57:02.586 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - 415 null application/problem+json; charset=utf-8 45.837ms
2025-04-24 17:59:34.151 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - application/json 76
2025-04-24 17:59:34.161 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 17:59:34.163 +02:00 [INF] Route matched with {action = "AddRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleAsync(TICKIFY.API.Contracts.Logging.AssignRoleReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 17:59:34.170 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-04-24 17:59:34.182 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 17:59:34.187 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:59:34.193 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:59:34.199 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:59:34.203 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 17:59:34.207 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 17:59:34.213 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 17:59:34.223 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 17:59:34.229 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Logging.AssignRoleReq'.
2025-04-24 17:59:34.231 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API) in 66.3941ms
2025-04-24 17:59:34.233 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 17:59:34.234 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - 200 null application/json; charset=utf-8 84.1161ms
2025-04-24 18:00:21.438 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/login - application/json 47
2025-04-24 18:00:21.452 +02:00 [INF] CORS policy execution successful.
2025-04-24 18:00:21.454 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API)'
2025-04-24 18:00:21.461 +02:00 [INF] Route matched with {action = "GetToken", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(TICKIFY.API.Contracts.Logging.LoginReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:00:21.478 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 18:00:21.558 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 18:00:21.562 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API) in 97.5424ms
2025-04-24 18:00:21.563 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API)'
2025-04-24 18:00:21.565 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/login - 400 null text/plain; charset=utf-8 127.0361ms
2025-04-24 18:01:36.665 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/login - application/json 133
2025-04-24 18:01:36.672 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API)'
2025-04-24 18:01:36.673 +02:00 [INF] Route matched with {action = "GetToken", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(TICKIFY.API.Contracts.Logging.LoginReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:01:36.679 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 18:01:36.751 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 18:01:36.755 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API) in 80.0589ms
2025-04-24 18:01:36.757 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API)'
2025-04-24 18:01:36.759 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/login - 400 null text/plain; charset=utf-8 94.4297ms
2025-04-24 18:03:32.283 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 140
2025-04-24 18:03:32.293 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 18:03:32.295 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 18:03:32.297 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 18:03:32.298 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:03:32.305 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 18:03:32.308 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-24 18:03:32.310 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 10.0714ms
2025-04-24 18:03:32.312 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 18:03:32.315 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 400 null text/plain; charset=utf-8 31.9671ms
2025-04-24 18:03:39.362 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 141
2025-04-24 18:03:39.367 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 18:03:39.374 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 18:03:39.376 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 18:03:39.378 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:03:39.384 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 18:03:39.399 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:03:39.474 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:03:39.482 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 18:03:39.489 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:03:39.496 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 18:03:39.500 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:03:39.505 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:03:39.515 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 18:03:39.524 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 18:03:39.531 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 18:03:39.534 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Auth.AuthRes'.
2025-04-24 18:03:39.536 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 155.8622ms
2025-04-24 18:03:39.538 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 18:03:39.540 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 200 null application/json; charset=utf-8 178.2087ms
2025-04-24 18:05:20.952 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - application/json 76
2025-04-24 18:05:20.963 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 18:05:20.964 +02:00 [INF] Route matched with {action = "AddRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleAsync(TICKIFY.API.Contracts.Logging.AssignRoleReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:05:20.972 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-04-24 18:05:20.978 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 18:05:20.984 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:05:20.991 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 18:05:20.995 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:05:20.998 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 18:05:21.001 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:05:21.007 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:05:21.017 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 18:05:21.023 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Logging.AssignRoleReq'.
2025-04-24 18:05:21.025 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API) in 57.9754ms
2025-04-24 18:05:21.027 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.AddRoleAsync (TICKIFY.API)'
2025-04-24 18:05:21.029 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/assign-role - 200 null application/json; charset=utf-8 78.2248ms
2025-04-24 18:06:02.240 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/login - application/json 66
2025-04-24 18:06:02.246 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API)'
2025-04-24 18:06:02.248 +02:00 [INF] Route matched with {action = "GetToken", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(TICKIFY.API.Contracts.Logging.LoginReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:06:02.257 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 18:06:02.332 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 18:06:02.340 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 18:06:02.345 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 18:06:02.355 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Auth.AuthRes'.
2025-04-24 18:06:02.357 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API) in 106.739ms
2025-04-24 18:06:02.359 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.GetTokenAsync (TICKIFY.API)'
2025-04-24 18:06:02.360 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/login - 200 null application/json; charset=utf-8 120.1638ms
2025-04-24 18:06:34.584 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5032/api/Driver/31 - application/json 113
2025-04-24 18:06:34.591 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-24 18:06:34.594 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-24 18:06:34.595 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5032/api/Driver/31 - 405 0 null 10.681ms
2025-04-24 18:07:56.926 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Driver/7
 - null null
2025-04-24 18:07:56.932 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 18:07:56.936 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-24 18:07:56.958 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 18:07:56.968 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-24 18:07:56.972 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API) in 32.6916ms
2025-04-24 18:07:56.974 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 18:07:56.975 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Driver/7
 - 200 null application/json; charset=utf-8 52.7626ms
2025-04-24 18:08:06.542 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5032/api/Driver/31 - application/json 113
2025-04-24 18:08:06.547 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-24 18:08:06.549 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-24 18:08:06.550 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5032/api/Driver/31 - 405 0 null 8.4781ms
2025-04-24 18:08:38.075 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5032/api/Hotel/3 - null 0
2025-04-24 18:08:38.085 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-24 18:08:38.086 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-24 18:08:38.088 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5032/api/Hotel/3 - 405 0 null 12.5617ms
2025-04-24 18:10:14.322 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Account/register - application/json 143
2025-04-24 18:10:14.334 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-24 18:10:14.338 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-24 18:10:14.340 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 18:10:14.341 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(TICKIFY.API.Contracts.Logging.RegisterReq) on controller TICKIFY.API.Controllers.AccountController (TICKIFY.API).
2025-04-24 18:10:14.356 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-04-24 18:10:14.367 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:10:14.445 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:10:14.459 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-04-24 18:10:14.466 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:10:14.472 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-04-24 18:10:14.478 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-04-24 18:10:14.483 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-04-24 18:10:14.493 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2025-04-24 18:10:14.501 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-04-24 18:10:14.506 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-04-24 18:10:14.512 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Auth.AuthRes'.
2025-04-24 18:10:14.514 +02:00 [INF] Executed action TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API) in 169.8884ms
2025-04-24 18:10:14.516 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.AccountController.RegisterAsync (TICKIFY.API)'
2025-04-24 18:10:14.519 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Account/register - 200 null application/json; charset=utf-8 197.2271ms
2025-04-24 18:14:42.529 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5032/api/Admin/Room/1 - application/json 80
2025-04-24 18:14:42.537 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.Admin.RoomController.UpdateRoom (TICKIFY.API)'
2025-04-24 18:14:42.548 +02:00 [INF] Route matched with {action = "UpdateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRoom(Int32, TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.Admin.RoomController (TICKIFY.API).
2025-04-24 18:14:42.581 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Rooms] AS [r]
WHERE [r].[RoomId] = @__id_0
2025-04-24 18:14:42.632 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Rooms] SET [BedCount] = @p0, [DateIn] = @p1, [DateOut] = @p2, [HotelId] = @p3, [PricePerNight] = @p4, [RoomNumber] = @p5, [Status] = @p6, [Type] = @p7
OUTPUT 1
WHERE [RoomId] = @p8;
2025-04-24 18:14:42.643 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Rooms.RoomRes'.
2025-04-24 18:14:42.649 +02:00 [INF] Executed action TICKIFY.API.Controllers.Admin.RoomController.UpdateRoom (TICKIFY.API) in 97.2453ms
2025-04-24 18:14:42.651 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.Admin.RoomController.UpdateRoom (TICKIFY.API)'
2025-04-24 18:14:42.653 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5032/api/Admin/Room/1 - 200 null application/json; charset=utf-8 123.8749ms
2025-04-24 20:22:49.920 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:22:50.065 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:22:50.077 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:22:50.091 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:22:50.126 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 20:22:50.161 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 20:22:50.169 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 20:22:50.590 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:22:50.618 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:22:50.636 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:22:50.674 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:22:50.804 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:22:50.888 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:22:50.893 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 20:22:51.228 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 20:22:51.298 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 20:22:51.481 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[DeletedAt], [r].[HotelId], [r].[IsDeleted], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 20:22:51.723 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 20:22:51.790 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 20:22:51.794 +02:00 [INF] Hosting environment: Development
2025-04-24 20:22:51.798 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 20:22:53.547 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 20:22:53.925 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 387.7787ms
2025-04-24 20:22:53.940 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 20:22:53.954 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 14.5342ms
2025-04-24 20:22:53.968 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 20:22:54.128 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 159.7221ms
2025-04-24 20:22:54.204 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 20:22:54.392 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 188.5821ms
2025-04-24 20:24:27.261 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5032/api/Admin/Driver/soft/1 - null null
2025-04-24 20:24:27.287 +02:00 [INF] CORS policy execution successful.
2025-04-24 20:24:27.354 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-04-24 20:24:27.362 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 20:24:27.367 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5032/api/Admin/Driver/soft/1 - 401 0 null 106.8269ms
2025-04-24 20:24:48.176 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5032/api/Admin/Driver/soft/1 - null null
2025-04-24 20:24:48.280 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.Admin.DriverController.SoftDeleteDriver (TICKIFY.API)'
2025-04-24 20:24:48.316 +02:00 [INF] Route matched with {action = "SoftDeleteDriver", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SoftDeleteDriver(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.Admin.DriverController (TICKIFY.API).
2025-04-24 20:24:48.479 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:24:48.634 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status]
FROM [Drivers] AS [d]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:24:48.764 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Drivers] SET [DeletedAt] = @p0, [IsDeleted] = @p1, [Status] = @p2
OUTPUT 1
WHERE [DriverId] = @p3;
2025-04-24 20:24:48.807 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-24 20:24:48.815 +02:00 [INF] Executed action TICKIFY.API.Controllers.Admin.DriverController.SoftDeleteDriver (TICKIFY.API) in 487.7949ms
2025-04-24 20:24:48.821 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.Admin.DriverController.SoftDeleteDriver (TICKIFY.API)'
2025-04-24 20:24:48.830 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5032/api/Admin/Driver/soft/1 - 204 null null 653.4109ms
2025-04-24 20:25:41.705 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Driver/1
 - null null
2025-04-24 20:25:41.716 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:25:41.732 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-24 20:25:41.758 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:25:41.774 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-24 20:25:41.785 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API) in 43.2017ms
2025-04-24 20:25:41.790 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:25:41.792 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Driver/1
 - 200 null application/json; charset=utf-8 89.166ms
2025-04-24 20:29:01.983 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:29:02.113 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:29:02.124 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:29:02.133 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:29:02.157 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 20:29:02.184 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 20:29:02.190 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 20:29:02.561 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:29:02.592 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:29:02.610 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:29:02.646 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:29:02.764 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:29:02.834 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:29:02.840 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 20:29:03.018 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 20:29:03.057 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 20:29:03.218 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[DeletedAt], [r].[HotelId], [r].[IsDeleted], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 20:29:03.414 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 20:29:03.524 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 20:29:03.527 +02:00 [INF] Hosting environment: Development
2025-04-24 20:29:03.530 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 20:29:03.851 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 20:29:04.161 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 324.733ms
2025-04-24 20:29:04.173 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 20:29:04.184 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 11.2498ms
2025-04-24 20:29:04.192 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 20:29:04.245 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.0271ms
2025-04-24 20:29:04.327 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 20:29:04.442 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 114.4896ms
2025-04-24 20:29:15.339 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Driver/1
 - null null
2025-04-24 20:29:15.604 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:29:15.664 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-24 20:29:15.938 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:29:16.228 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-24 20:29:16.254 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API) in 573.4553ms
2025-04-24 20:29:16.261 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:29:16.274 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Driver/1
 - 200 null application/json; charset=utf-8 936.3025ms
2025-04-24 20:29:30.809 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Driver/1 - null null
2025-04-24 20:29:30.827 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-04-24 20:29:30.841 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 20:29:30.847 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Driver/1 - 401 0 null 37.8298ms
2025-04-24 20:29:41.927 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1 - null null
2025-04-24 20:29:41.941 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-04-24 20:29:41.944 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-24 20:29:41.950 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1 - 401 0 null 23.0246ms
2025-04-24 20:31:02.851 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:31:02.979 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:31:02.990 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:31:02.998 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:31:03.023 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 20:31:03.049 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 20:31:03.055 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 20:31:03.413 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:31:03.463 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:31:03.493 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:31:03.541 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:31:03.641 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:31:03.718 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:31:03.726 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 20:31:03.913 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 20:31:03.954 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 20:31:04.055 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[DeletedAt], [r].[HotelId], [r].[IsDeleted], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 20:31:04.240 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 20:31:04.301 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 20:31:04.312 +02:00 [INF] Hosting environment: Development
2025-04-24 20:31:04.316 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 20:31:04.909 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 20:31:05.210 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 311.1107ms
2025-04-24 20:31:05.217 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 20:31:05.224 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 20:31:05.248 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 23.3292ms
2025-04-24 20:31:05.277 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.4685ms
2025-04-24 20:31:05.347 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 20:31:05.469 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.0658ms
2025-04-24 20:31:19.821 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Driver/1 - null null
2025-04-24 20:31:19.940 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:31:20.015 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-24 20:31:20.252 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:31:20.548 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-24 20:31:20.581 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API) in 546.9927ms
2025-04-24 20:31:20.590 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:31:20.609 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Driver/1 - 200 null application/json; charset=utf-8 788.1878ms
2025-04-24 20:32:23.812 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:32:23.937 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:32:23.948 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:32:23.955 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:32:23.979 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 20:32:24.009 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 20:32:24.015 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 20:32:24.370 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:32:24.398 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:32:24.414 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:32:24.464 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:32:24.562 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:32:24.621 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:32:24.628 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 20:32:24.856 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 20:32:24.903 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 20:32:25.354 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 20:32:25.423 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 20:32:25.432 +02:00 [INF] Hosting environment: Development
2025-04-24 20:32:25.437 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 20:32:26.002 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 20:32:26.316 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 320.4032ms
2025-04-24 20:32:26.320 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 20:32:26.331 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 20:32:26.350 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 19.4958ms
2025-04-24 20:32:26.397 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.1689ms
2025-04-24 20:32:26.459 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 20:32:26.580 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.1042ms
2025-04-24 20:32:29.783 +02:00 [INF] Executed DbCommand (4,775ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[DeletedAt], [r].[HotelId], [r].[IsDeleted], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 20:32:29.921 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1
 - null null
2025-04-24 20:32:30.237 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:32:30.327 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.Admin.DriverController (TICKIFY.API).
2025-04-24 20:32:30.661 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:32:31.047 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-24 20:32:31.078 +02:00 [INF] Executed action TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API) in 734.224ms
2025-04-24 20:32:31.085 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:32:31.095 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1
 - 200 null application/json; charset=utf-8 1175.0852ms
2025-04-24 20:32:37.411 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1
 - null null
2025-04-24 20:32:37.430 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:32:37.436 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.Admin.DriverController (TICKIFY.API).
2025-04-24 20:32:37.453 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0
2025-04-24 20:32:37.464 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-24 20:32:37.472 +02:00 [INF] Executed action TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API) in 30.0792ms
2025-04-24 20:32:37.479 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:32:37.486 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1
 - 200 null application/json; charset=utf-8 75.1109ms
2025-04-24 20:39:56.079 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:39:56.191 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:39:56.202 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-24 20:39:56.211 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-24 20:39:56.236 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-24 20:39:56.277 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-24 20:39:56.286 +02:00 [INF] Migrations Applied Successfully.
2025-04-24 20:39:56.639 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:39:56.672 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:39:56.687 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:39:56.719 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-24 20:39:56.819 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:39:56.892 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-04-24 20:39:56.900 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-24 20:39:57.095 +02:00 [INF] User profile is available. Using 'C:\Users\raya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-24 20:39:57.150 +02:00 [INF] Reservation Expiry Service running.
2025-04-24 20:39:57.265 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[DeletedAt], [r].[HotelId], [r].[IsDeleted], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-24 20:39:57.432 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-24 20:39:57.489 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-24 20:39:57.498 +02:00 [INF] Hosting environment: Development
2025-04-24 20:39:57.503 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-24 20:39:58.162 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-24 20:39:58.471 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 322.9178ms
2025-04-24 20:39:58.476 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-24 20:39:58.489 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-24 20:39:58.505 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 15.2857ms
2025-04-24 20:39:58.550 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.687ms
2025-04-24 20:39:58.608 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-24 20:39:58.725 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.2082ms
2025-04-24 20:40:02.631 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1
 - null null
2025-04-24 20:40:02.783 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:40:02.816 +02:00 [INF] Route matched with {action = "GetDriverById", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDriverById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.Admin.DriverController (TICKIFY.API).
2025-04-24 20:40:02.959 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DeletedAt], [d].[DriverName], [d].[HotelId], [d].[IsDeleted], [d].[Price], [d].[StarRating], [d].[Status], [h].[HotelId], [h].[DeletedAt], [h].[IsDeleted], [h].[Location], [h].[Name], [h].[StarRating], [h].[Status]
FROM [Drivers] AS [d]
INNER JOIN [Hotels] AS [h] ON [d].[HotelId] = [h].[HotelId]
WHERE [d].[DriverId] = @__id_0 AND [d].[IsDeleted] = CAST(0 AS bit)
2025-04-24 20:40:02.981 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'DriverErrors'.
2025-04-24 20:40:02.993 +02:00 [INF] Executed action TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API) in 167.9844ms
2025-04-24 20:40:02.997 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.Admin.DriverController.GetDriverById (TICKIFY.API)'
2025-04-24 20:40:03.006 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Admin/Driver/1
 - 404 null application/json; charset=utf-8 375.7892ms
