2025-04-16 19:29:04.396 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:29:04.458 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:29:04.465 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:29:04.470 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:29:04.485 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 19:29:04.502 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 19:29:04.507 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 19:29:04.732 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:29:04.868 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 200), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 200), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 200), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (Size = 200), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 200), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 200), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 200), @p28='?' (Size = 4000), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Hotels] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3),
(@p12, @p13, @p14, 4),
(@p15, @p16, @p17, 5),
(@p18, @p19, @p20, 6),
(@p21, @p22, @p23, 7),
(@p24, @p25, @p26, 8),
(@p27, @p28, @p29, 9)) AS i ([Location], [Name], [StarRating], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Location], [Name], [StarRating])
VALUES (i.[Location], i.[Name], i.[StarRating])
OUTPUT INSERTED.[HotelId], i._Position;
2025-04-16 19:29:04.899 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:29:04.957 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (Size = 100), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 100), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Int32), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (Size = 4000), @p31='?' (Size = 100), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (DbType = Int32), @p38='?' (Size = 4000), @p39='?' (Size = 100), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (DbType = DateTime2), @p43='?' (DbType = Int32), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (Size = 4000), @p47='?' (Size = 100), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = DateTime2), @p51='?' (DbType = Int32), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (Size = 4000), @p55='?' (Size = 100), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (DbType = DateTime2), @p59='?' (DbType = Int32), @p60='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p61='?' (DbType = Int32), @p62='?' (Size = 4000), @p63='?' (Size = 100), @p64='?' (DbType = Int32), @p65='?' (DbType = DateTime2), @p66='?' (DbType = DateTime2), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (Size = 4000), @p71='?' (Size = 100), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = DateTime2), @p75='?' (DbType = Int32), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (Size = 4000), @p79='?' (Size = 100), @p80='?' (DbType = Int32), @p81='?' (DbType = DateTime2), @p82='?' (DbType = DateTime2), @p83='?' (DbType = Int32), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (Size = 4000), @p87='?' (Size = 100), @p88='?' (DbType = Int32), @p89='?' (DbType = DateTime2), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Int32), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (Size = 4000), @p95='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 1),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 2),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 3),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 4),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 5),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 6),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, 7),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 8),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, 9),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, 10),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 11)) AS i ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type])
VALUES (i.[BedCount], i.[DateIn], i.[DateOut], i.[HotelId], i.[PricePerNight], i.[RoomNumber], i.[Status], i.[Type])
OUTPUT INSERTED.[RoomId], i._Position;
2025-04-16 19:29:04.969 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:29:05.004 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 100), @p2='?' (DbType = Int32), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (Size = 50), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (Size = 50), @p11='?' (Size = 100), @p12='?' (DbType = Int32), @p13='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Size = 100), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (DbType = Int32), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p24='?' (DbType = Int32), @p25='?' (Size = 50), @p26='?' (Size = 100), @p27='?' (DbType = Int32), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (Size = 50), @p31='?' (Size = 100), @p32='?' (DbType = Int32), @p33='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = Int32), @p35='?' (Size = 50), @p36='?' (Size = 100), @p37='?' (DbType = Int32), @p38='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p39='?' (DbType = Int32), @p40='?' (Size = 50), @p41='?' (Size = 100), @p42='?' (DbType = Int32), @p43='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Size = 100), @p47='?' (DbType = Int32), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (DbType = Int32), @p50='?' (Size = 50), @p51='?' (Size = 100), @p52='?' (DbType = Int32), @p53='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p54='?' (DbType = Int32), @p55='?' (Size = 50), @p56='?' (Size = 100), @p57='?' (DbType = Int32), @p58='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (Size = 50), @p61='?' (Size = 100), @p62='?' (DbType = Int32), @p63='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p64='?' (DbType = Int32), @p65='?' (Size = 50), @p66='?' (Size = 100), @p67='?' (DbType = Int32), @p68='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (Size = 50), @p71='?' (Size = 100), @p72='?' (DbType = Int32), @p73='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Size = 100), @p77='?' (DbType = Int32), @p78='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p79='?' (DbType = Int32), @p80='?' (Size = 50), @p81='?' (Size = 100), @p82='?' (DbType = Int32), @p83='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p84='?' (DbType = Int32), @p85='?' (Size = 50), @p86='?' (Size = 100), @p87='?' (DbType = Int32), @p88='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (Size = 50), @p91='?' (Size = 100), @p92='?' (DbType = Int32), @p93='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p94='?' (DbType = Int32), @p95='?' (Size = 50), @p96='?' (Size = 100), @p97='?' (DbType = Int32), @p98='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p99='?' (DbType = Int32), @p100='?' (Size = 50), @p101='?' (Size = 100), @p102='?' (DbType = Int32), @p103='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Size = 100), @p107='?' (DbType = Int32), @p108='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p109='?' (DbType = Int32), @p110='?' (Size = 50), @p111='?' (Size = 100), @p112='?' (DbType = Int32), @p113='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p114='?' (DbType = Int32), @p115='?' (Size = 50), @p116='?' (Size = 100), @p117='?' (DbType = Int32), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32), @p120='?' (Size = 50), @p121='?' (Size = 100), @p122='?' (DbType = Int32), @p123='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p124='?' (DbType = Int32), @p125='?' (Size = 50), @p126='?' (Size = 100), @p127='?' (DbType = Int32), @p128='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p129='?' (DbType = Int32), @p130='?' (Size = 50), @p131='?' (Size = 100), @p132='?' (DbType = Int32), @p133='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p134='?' (DbType = Int32), @p135='?' (Size = 50), @p136='?' (Size = 100), @p137='?' (DbType = Int32), @p138='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p139='?' (DbType = Int32), @p140='?' (Size = 50), @p141='?' (Size = 100), @p142='?' (DbType = Int32), @p143='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p144='?' (DbType = Int32), @p145='?' (Size = 50), @p146='?' (Size = 100), @p147='?' (DbType = Int32), @p148='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p149='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Drivers] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4),
(@p25, @p26, @p27, @p28, @p29, 5),
(@p30, @p31, @p32, @p33, @p34, 6),
(@p35, @p36, @p37, @p38, @p39, 7),
(@p40, @p41, @p42, @p43, @p44, 8),
(@p45, @p46, @p47, @p48, @p49, 9),
(@p50, @p51, @p52, @p53, @p54, 10),
(@p55, @p56, @p57, @p58, @p59, 11),
(@p60, @p61, @p62, @p63, @p64, 12),
(@p65, @p66, @p67, @p68, @p69, 13),
(@p70, @p71, @p72, @p73, @p74, 14),
(@p75, @p76, @p77, @p78, @p79, 15),
(@p80, @p81, @p82, @p83, @p84, 16),
(@p85, @p86, @p87, @p88, @p89, 17),
(@p90, @p91, @p92, @p93, @p94, 18),
(@p95, @p96, @p97, @p98, @p99, 19),
(@p100, @p101, @p102, @p103, @p104, 20),
(@p105, @p106, @p107, @p108, @p109, 21),
(@p110, @p111, @p112, @p113, @p114, 22),
(@p115, @p116, @p117, @p118, @p119, 23),
(@p120, @p121, @p122, @p123, @p124, 24),
(@p125, @p126, @p127, @p128, @p129, 25),
(@p130, @p131, @p132, @p133, @p134, 26),
(@p135, @p136, @p137, @p138, @p139, 27),
(@p140, @p141, @p142, @p143, @p144, 28),
(@p145, @p146, @p147, @p148, @p149, 29)) AS i ([CarType], [DriverName], [HotelId], [Price], [StarRating], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CarType], [DriverName], [HotelId], [Price], [StarRating])
VALUES (i.[CarType], i.[DriverName], i.[HotelId], i.[Price], i.[StarRating])
OUTPUT INSERTED.[DriverId], i._Position;
2025-04-16 19:29:05.016 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:29:05.048 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (Size = 4000), @p42='?' (DbType = DateTime2), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (Size = 4000), @p48='?' (DbType = DateTime2), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (DbType = Int32), @p64='?' (DbType = Int32), @p65='?' (Size = 4000), @p66='?' (DbType = DateTime2), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (DbType = Int32), @p70='?' (DbType = Int32), @p71='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HotelReservations] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11)) AS i ([CheckInDate], [CheckOutDate], [DriverId], [HotelId], [RoomId], [Status], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CheckInDate], [CheckOutDate], [DriverId], [HotelId], [RoomId], [Status])
VALUES (i.[CheckInDate], i.[CheckOutDate], i.[DriverId], i.[HotelId], i.[RoomId], i.[Status])
OUTPUT INSERTED.[HotelReservationId], i._Position;
2025-04-16 19:29:05.055 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 19:29:05.213 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 19:29:05.216 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 19:29:05.217 +02:00 [INF] Hosting environment: Development
2025-04-16 19:29:05.219 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 19:51:43.914 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:51:43.988 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:51:44.002 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:51:44.007 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:51:44.024 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 19:51:44.043 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 19:51:44.049 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 19:51:44.315 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:51:44.341 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:51:44.353 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:51:44.366 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 19:51:44.372 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 19:51:44.644 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 19:51:44.700 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 19:51:44.710 +02:00 [INF] Hosting environment: Development
2025-04-16 19:51:44.712 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 19:51:46.185 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 19:51:46.445 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 269.6441ms
2025-04-16 19:51:46.448 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 19:51:46.458 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 19:51:46.478 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 20.198ms
2025-04-16 19:51:47.057 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 610.7119ms
2025-04-16 19:51:47.117 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 19:51:47.205 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.7305ms
2025-04-16 19:52:10.035 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/HotelReservation/get-all-reservations - null null
2025-04-16 19:52:10.066 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.GetAllReservations (TICKIFY.API)'
2025-04-16 19:52:10.092 +02:00 [INF] Route matched with {action = "GetAllReservations", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllReservations(System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 19:52:10.248 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DriverId], [h].[HotelId], [h].[RoomId], [h].[Status], [h0].[HotelId], [h0].[Location], [h0].[Name], [h0].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [HotelReservations] AS [h]
INNER JOIN [Hotels] AS [h0] ON [h].[HotelId] = [h0].[HotelId]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
INNER JOIN [Drivers] AS [d] ON [h].[DriverId] = [d].[DriverId]
2025-04-16 19:52:10.353 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TICKIFY.Data.Entities.HotelReservations, TICKIFY.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TICKIFY.API.Contracts.HotelReservations.ReservationRes, TICKIFY.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 19:52:10.370 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.GetAllReservations (TICKIFY.API) in 270.9661ms
2025-04-16 19:52:10.373 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.GetAllReservations (TICKIFY.API)'
2025-04-16 19:52:10.379 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/HotelReservation/get-all-reservations - 200 null application/json; charset=utf-8 343.1654ms
2025-04-16 19:52:47.788 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/HotelReservation/12 - null null
2025-04-16 19:52:47.802 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.GetReservationById (TICKIFY.API)'
2025-04-16 19:52:47.810 +02:00 [INF] Route matched with {action = "GetReservationById", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReservationById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 19:52:47.915 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DriverId], [h].[HotelId], [h].[RoomId], [h].[Status], [h0].[HotelId], [h0].[Location], [h0].[Name], [h0].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [HotelReservations] AS [h]
INNER JOIN [Hotels] AS [h0] ON [h].[HotelId] = [h0].[HotelId]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
INNER JOIN [Drivers] AS [d] ON [h].[DriverId] = [d].[DriverId]
WHERE [h].[HotelReservationId] = @__id_0
2025-04-16 19:52:47.921 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.HotelReservations.ReservationRes'.
2025-04-16 19:52:47.924 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.GetReservationById (TICKIFY.API) in 108.8871ms
2025-04-16 19:52:47.926 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.GetReservationById (TICKIFY.API)'
2025-04-16 19:52:47.928 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/HotelReservation/12 - 200 null application/json; charset=utf-8 139.5819ms
2025-04-16 19:54:26.789 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - application/json 179
2025-04-16 19:54:26.795 +02:00 [INF] CORS policy execution successful.
2025-04-16 19:54:26.797 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:54:26.802 +02:00 [INF] Route matched with {action = "CreateReservation", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReservation(TICKIFY.API.Contracts.HotelReservations.ReservationReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 19:54:26.859 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__reservationReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[Location], [t].[Name], [t].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM (
    SELECT TOP(1) [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__reservationReq_HotelId_0
) AS [t]
LEFT JOIN [Drivers] AS [d] ON [t].[HotelId] = [d].[HotelId]
ORDER BY [t].[HotelId]
2025-04-16 19:54:26.872 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reservationReq_DriverId_0='?' (DbType = Int32), @__reservationReq_HotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [Drivers] AS [d]
WHERE [d].[DriverId] = @__reservationReq_DriverId_0 AND [d].[HotelId] = @__reservationReq_HotelId_1
2025-04-16 19:54:26.882 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reservationReq_RoomId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Rooms] AS [r]
WHERE [r].[RoomId] = @__reservationReq_RoomId_0 AND [r].[Status] = N'Available'
2025-04-16 19:54:26.895 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__reservationReq_RoomId_0='?' (DbType = Int32), @__reservationReq_CheckOutData_1='?' (DbType = DateTime2), @__reservationReq_CheckInDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DriverId], [h].[HotelId], [h].[RoomId], [h].[Status]
FROM [HotelReservations] AS [h]
WHERE [h].[RoomId] = @__reservationReq_RoomId_0 AND [h].[CheckInDate] < @__reservationReq_CheckOutData_1 AND [h].[CheckOutDate] > @__reservationReq_CheckInDate_2
2025-04-16 19:54:27.018 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p7='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HotelReservations] ([CheckInDate], [CheckOutDate], [DriverId], [HotelId], [RoomId], [Status])
OUTPUT INSERTED.[HotelReservationId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Rooms] SET [Status] = @p6
OUTPUT 1
WHERE [RoomId] = @p7;
2025-04-16 19:54:27.054 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.HotelReservations.ReservationRes'.
2025-04-16 19:54:27.058 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API) in 252.8623ms
2025-04-16 19:54:27.060 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:54:27.061 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - 200 null application/json; charset=utf-8 272.2821ms
2025-04-16 19:55:39.207 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - application/json 179
2025-04-16 19:55:39.216 +02:00 [INF] CORS policy execution successful.
2025-04-16 19:55:39.218 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:55:39.219 +02:00 [INF] Route matched with {action = "CreateReservation", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReservation(TICKIFY.API.Contracts.HotelReservations.ReservationReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 19:55:39.234 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__reservationReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[Location], [t].[Name], [t].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM (
    SELECT TOP(1) [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__reservationReq_HotelId_0
) AS [t]
LEFT JOIN [Drivers] AS [d] ON [t].[HotelId] = [d].[HotelId]
ORDER BY [t].[HotelId]
2025-04-16 19:55:39.242 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reservationReq_DriverId_0='?' (DbType = Int32), @__reservationReq_HotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [Drivers] AS [d]
WHERE [d].[DriverId] = @__reservationReq_DriverId_0 AND [d].[HotelId] = @__reservationReq_HotelId_1
2025-04-16 19:55:39.246 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reservationReq_RoomId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Rooms] AS [r]
WHERE [r].[RoomId] = @__reservationReq_RoomId_0 AND [r].[Status] = N'Available'
2025-04-16 19:55:39.250 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TICKIFY.API.Abstracts.Error'.
2025-04-16 19:55:39.252 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API) in 31.4044ms
2025-04-16 19:55:39.254 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:55:39.257 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - 400 null application/json; charset=utf-8 50.1822ms
2025-04-16 19:56:12.473 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - application/json 179
2025-04-16 19:56:12.486 +02:00 [INF] CORS policy execution successful.
2025-04-16 19:56:12.487 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:56:12.489 +02:00 [INF] Route matched with {action = "CreateReservation", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReservation(TICKIFY.API.Contracts.HotelReservations.ReservationReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 19:56:12.496 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__reservationReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[Location], [t].[Name], [t].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM (
    SELECT TOP(1) [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__reservationReq_HotelId_0
) AS [t]
LEFT JOIN [Drivers] AS [d] ON [t].[HotelId] = [d].[HotelId]
ORDER BY [t].[HotelId]
2025-04-16 19:56:12.505 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reservationReq_DriverId_0='?' (DbType = Int32), @__reservationReq_HotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [Drivers] AS [d]
WHERE [d].[DriverId] = @__reservationReq_DriverId_0 AND [d].[HotelId] = @__reservationReq_HotelId_1
2025-04-16 19:56:12.509 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reservationReq_RoomId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Rooms] AS [r]
WHERE [r].[RoomId] = @__reservationReq_RoomId_0 AND [r].[Status] = N'Available'
2025-04-16 19:56:12.511 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TICKIFY.API.Abstracts.Error'.
2025-04-16 19:56:12.514 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API) in 21.7694ms
2025-04-16 19:56:12.516 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:56:12.517 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - 400 null application/json; charset=utf-8 43.9179ms
2025-04-16 19:58:16.597 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - application/json 179
2025-04-16 19:58:16.608 +02:00 [INF] CORS policy execution successful.
2025-04-16 19:58:16.611 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:58:16.615 +02:00 [INF] Route matched with {action = "CreateReservation", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReservation(TICKIFY.API.Contracts.HotelReservations.ReservationReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 19:58:16.625 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__reservationReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[Location], [t].[Name], [t].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM (
    SELECT TOP(1) [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__reservationReq_HotelId_0
) AS [t]
LEFT JOIN [Drivers] AS [d] ON [t].[HotelId] = [d].[HotelId]
ORDER BY [t].[HotelId]
2025-04-16 19:58:16.632 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reservationReq_DriverId_0='?' (DbType = Int32), @__reservationReq_HotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [Drivers] AS [d]
WHERE [d].[DriverId] = @__reservationReq_DriverId_0 AND [d].[HotelId] = @__reservationReq_HotelId_1
2025-04-16 19:58:16.636 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TICKIFY.API.Abstracts.Error'.
2025-04-16 19:58:16.638 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API) in 18.8507ms
2025-04-16 19:58:16.640 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.CreateReservation (TICKIFY.API)'
2025-04-16 19:58:16.641 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/HotelReservation/reserve - 400 null application/json; charset=utf-8 43.8391ms
2025-04-16 20:00:03.389 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:00:03.465 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:00:03.477 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:00:03.482 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:00:03.498 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:00:03.522 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:00:03.528 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 20:00:03.791 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:00:03.811 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:00:03.821 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:00:03.829 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:00:03.833 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 20:00:04.075 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 20:00:04.120 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:00:04.128 +02:00 [INF] Hosting environment: Development
2025-04-16 20:00:04.131 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 20:00:04.783 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 20:00:04.997 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 221.5001ms
2025-04-16 20:00:05.001 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 20:00:05.005 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:00:05.019 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 13.1781ms
2025-04-16 20:00:05.047 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.5907ms
2025-04-16 20:00:05.185 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 20:00:05.267 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.1121ms
2025-04-16 20:54:59.421 +02:00 [WRN] Entity 'HotelReservations' has a global query filter defined and is the required end of a relationship with the entity 'ReservationDetails'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-16 20:54:59.965 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:55:00.002 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:55:00.018 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:55:00.025 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:55:00.044 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:55:00.070 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:55:00.075 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 20:55:00.357 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:55:00.379 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:55:00.391 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:55:00.423 +02:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 20:55:00.453 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'TICKIFY.API.Persistence.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
2025-04-16 20:55:00.642 +02:00 [ERR] Error during migration/seeding: Invalid column name 'IsDeleted'.
2025-04-16 20:55:00.762 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 20:55:00.882 +02:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 20:55:00.890 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'TICKIFY.API.Persistence.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
Invalid column name 'IsDeleted'.
Invalid column name 'DeletedAt'.
Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
Invalid column name 'IsDeleted'.
Invalid column name 'DeletedAt'.
Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
2025-04-16 20:55:00.957 +02:00 [ERR] Error processing expired reservations
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
Invalid column name 'IsDeleted'.
Invalid column name 'DeletedAt'.
Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TICKIFY.API.Services.Background.ReservationExpiryService.ExecuteAsync(CancellationToken stoppingToken) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\ReservationExpiryService.cs:line 36
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
2025-04-16 20:55:01.084 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 20:55:01.127 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:55:01.136 +02:00 [INF] Hosting environment: Development
2025-04-16 20:55:01.138 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 20:55:01.689 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 20:55:01.899 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 218.2463ms
2025-04-16 20:55:01.908 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:55:01.917 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 9.5107ms
2025-04-16 20:55:01.925 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 20:55:01.967 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.9256ms
2025-04-16 20:55:02.015 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 20:55:02.102 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.3181ms
2025-04-16 20:55:15.115 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/HotelReservation/check-expired - null 0
2025-04-16 20:55:15.129 +02:00 [INF] CORS policy execution successful.
2025-04-16 20:55:15.134 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations (TICKIFY.API)'
2025-04-16 20:55:15.156 +02:00 [INF] Route matched with {action = "CheckExpiredReservations", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckExpiredReservations(System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 20:55:15.265 +02:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < @__now_0
2025-04-16 20:55:15.272 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'TICKIFY.API.Persistence.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
Invalid column name 'IsDeleted'.
Invalid column name 'DeletedAt'.
Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
Invalid column name 'IsDeleted'.
Invalid column name 'DeletedAt'.
Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
2025-04-16 20:55:15.372 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations (TICKIFY.API) in 209.2941ms
2025-04-16 20:55:15.377 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations (TICKIFY.API)'
2025-04-16 20:55:15.381 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
Invalid column name 'IsDeleted'.
Invalid column name 'DeletedAt'.
Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TICKIFY.API.Services.Implementations.HotelReservationServices.CheckExpiredReservations(CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\HotelReservationServices.cs:line 31
   at TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations(CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\HotelReservationController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:7ea37855-ab9c-49c2-aee4-a1acc68f7e37
Error Number:207,State:1,Class:16
2025-04-16 20:55:15.401 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/HotelReservation/check-expired - 500 null text/plain; charset=utf-8 286.6906ms
2025-04-16 21:19:28.619 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:19:28.682 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:19:28.691 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:19:28.695 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:19:28.710 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:19:28.727 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:19:28.732 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 21:19:28.945 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:29.073 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 200), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 200), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 200), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (Size = 200), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 200), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 200), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 200), @p28='?' (Size = 4000), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Hotels] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3),
(@p12, @p13, @p14, 4),
(@p15, @p16, @p17, 5),
(@p18, @p19, @p20, 6),
(@p21, @p22, @p23, 7),
(@p24, @p25, @p26, 8),
(@p27, @p28, @p29, 9)) AS i ([Location], [Name], [StarRating], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Location], [Name], [StarRating])
VALUES (i.[Location], i.[Name], i.[StarRating])
OUTPUT INSERTED.[HotelId], i._Position;
2025-04-16 21:19:29.104 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:29.158 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (Size = 100), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 100), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Int32), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (Size = 4000), @p31='?' (Size = 100), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (DbType = Int32), @p38='?' (Size = 4000), @p39='?' (Size = 100), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (DbType = DateTime2), @p43='?' (DbType = Int32), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (Size = 4000), @p47='?' (Size = 100), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = DateTime2), @p51='?' (DbType = Int32), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (Size = 4000), @p55='?' (Size = 100), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (DbType = DateTime2), @p59='?' (DbType = Int32), @p60='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p61='?' (DbType = Int32), @p62='?' (Size = 4000), @p63='?' (Size = 100), @p64='?' (DbType = Int32), @p65='?' (DbType = DateTime2), @p66='?' (DbType = DateTime2), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (Size = 4000), @p71='?' (Size = 100), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = DateTime2), @p75='?' (DbType = Int32), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (Size = 4000), @p79='?' (Size = 100), @p80='?' (DbType = Int32), @p81='?' (DbType = DateTime2), @p82='?' (DbType = DateTime2), @p83='?' (DbType = Int32), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (Size = 4000), @p87='?' (Size = 100), @p88='?' (DbType = Int32), @p89='?' (DbType = DateTime2), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Int32), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (Size = 4000), @p95='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Rooms] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 1),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 2),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 3),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 4),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 5),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 6),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, 7),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 8),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, 9),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, 10),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 11)) AS i ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type])
VALUES (i.[BedCount], i.[DateIn], i.[DateOut], i.[HotelId], i.[PricePerNight], i.[RoomNumber], i.[Status], i.[Type])
OUTPUT INSERTED.[RoomId], i._Position;
2025-04-16 21:19:29.171 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:29.206 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 100), @p2='?' (DbType = Int32), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (Size = 50), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (Size = 50), @p11='?' (Size = 100), @p12='?' (DbType = Int32), @p13='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Size = 100), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (DbType = Int32), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p24='?' (DbType = Int32), @p25='?' (Size = 50), @p26='?' (Size = 100), @p27='?' (DbType = Int32), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (Size = 50), @p31='?' (Size = 100), @p32='?' (DbType = Int32), @p33='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = Int32), @p35='?' (Size = 50), @p36='?' (Size = 100), @p37='?' (DbType = Int32), @p38='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p39='?' (DbType = Int32), @p40='?' (Size = 50), @p41='?' (Size = 100), @p42='?' (DbType = Int32), @p43='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Size = 100), @p47='?' (DbType = Int32), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (DbType = Int32), @p50='?' (Size = 50), @p51='?' (Size = 100), @p52='?' (DbType = Int32), @p53='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p54='?' (DbType = Int32), @p55='?' (Size = 50), @p56='?' (Size = 100), @p57='?' (DbType = Int32), @p58='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (Size = 50), @p61='?' (Size = 100), @p62='?' (DbType = Int32), @p63='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p64='?' (DbType = Int32), @p65='?' (Size = 50), @p66='?' (Size = 100), @p67='?' (DbType = Int32), @p68='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (Size = 50), @p71='?' (Size = 100), @p72='?' (DbType = Int32), @p73='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Size = 100), @p77='?' (DbType = Int32), @p78='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p79='?' (DbType = Int32), @p80='?' (Size = 50), @p81='?' (Size = 100), @p82='?' (DbType = Int32), @p83='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p84='?' (DbType = Int32), @p85='?' (Size = 50), @p86='?' (Size = 100), @p87='?' (DbType = Int32), @p88='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (Size = 50), @p91='?' (Size = 100), @p92='?' (DbType = Int32), @p93='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p94='?' (DbType = Int32), @p95='?' (Size = 50), @p96='?' (Size = 100), @p97='?' (DbType = Int32), @p98='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p99='?' (DbType = Int32), @p100='?' (Size = 50), @p101='?' (Size = 100), @p102='?' (DbType = Int32), @p103='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Size = 100), @p107='?' (DbType = Int32), @p108='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p109='?' (DbType = Int32), @p110='?' (Size = 50), @p111='?' (Size = 100), @p112='?' (DbType = Int32), @p113='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p114='?' (DbType = Int32), @p115='?' (Size = 50), @p116='?' (Size = 100), @p117='?' (DbType = Int32), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32), @p120='?' (Size = 50), @p121='?' (Size = 100), @p122='?' (DbType = Int32), @p123='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p124='?' (DbType = Int32), @p125='?' (Size = 50), @p126='?' (Size = 100), @p127='?' (DbType = Int32), @p128='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p129='?' (DbType = Int32), @p130='?' (Size = 50), @p131='?' (Size = 100), @p132='?' (DbType = Int32), @p133='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p134='?' (DbType = Int32), @p135='?' (Size = 50), @p136='?' (Size = 100), @p137='?' (DbType = Int32), @p138='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p139='?' (DbType = Int32), @p140='?' (Size = 50), @p141='?' (Size = 100), @p142='?' (DbType = Int32), @p143='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p144='?' (DbType = Int32), @p145='?' (Size = 50), @p146='?' (Size = 100), @p147='?' (DbType = Int32), @p148='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p149='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Drivers] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4),
(@p25, @p26, @p27, @p28, @p29, 5),
(@p30, @p31, @p32, @p33, @p34, 6),
(@p35, @p36, @p37, @p38, @p39, 7),
(@p40, @p41, @p42, @p43, @p44, 8),
(@p45, @p46, @p47, @p48, @p49, 9),
(@p50, @p51, @p52, @p53, @p54, 10),
(@p55, @p56, @p57, @p58, @p59, 11),
(@p60, @p61, @p62, @p63, @p64, 12),
(@p65, @p66, @p67, @p68, @p69, 13),
(@p70, @p71, @p72, @p73, @p74, 14),
(@p75, @p76, @p77, @p78, @p79, 15),
(@p80, @p81, @p82, @p83, @p84, 16),
(@p85, @p86, @p87, @p88, @p89, 17),
(@p90, @p91, @p92, @p93, @p94, 18),
(@p95, @p96, @p97, @p98, @p99, 19),
(@p100, @p101, @p102, @p103, @p104, 20),
(@p105, @p106, @p107, @p108, @p109, 21),
(@p110, @p111, @p112, @p113, @p114, 22),
(@p115, @p116, @p117, @p118, @p119, 23),
(@p120, @p121, @p122, @p123, @p124, 24),
(@p125, @p126, @p127, @p128, @p129, 25),
(@p130, @p131, @p132, @p133, @p134, 26),
(@p135, @p136, @p137, @p138, @p139, 27),
(@p140, @p141, @p142, @p143, @p144, 28),
(@p145, @p146, @p147, @p148, @p149, 29)) AS i ([CarType], [DriverName], [HotelId], [Price], [StarRating], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CarType], [DriverName], [HotelId], [Price], [StarRating])
VALUES (i.[CarType], i.[DriverName], i.[HotelId], i.[Price], i.[StarRating])
OUTPUT INSERTED.[DriverId], i._Position;
2025-04-16 21:19:29.231 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:29.276 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (DbType = DateTime2), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Boolean), @p22='?' (DbType = Int32), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Boolean), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime2), @p33='?' (DbType = DateTime2), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Boolean), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = DateTime2), @p41='?' (DbType = DateTime2), @p42='?' (DbType = DateTime2), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Boolean), @p46='?' (DbType = Int32), @p47='?' (Size = 4000), @p48='?' (DbType = DateTime2), @p49='?' (DbType = DateTime2), @p50='?' (DbType = DateTime2), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (DbType = Boolean), @p54='?' (DbType = Int32), @p55='?' (Size = 4000), @p56='?' (DbType = DateTime2), @p57='?' (DbType = DateTime2), @p58='?' (DbType = DateTime2), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = Boolean), @p62='?' (DbType = Int32), @p63='?' (Size = 4000), @p64='?' (DbType = DateTime2), @p65='?' (DbType = DateTime2), @p66='?' (DbType = DateTime2), @p67='?' (DbType = Int32), @p68='?' (DbType = Int32), @p69='?' (DbType = Boolean), @p70='?' (DbType = Int32), @p71='?' (Size = 4000), @p72='?' (DbType = DateTime2), @p73='?' (DbType = DateTime2), @p74='?' (DbType = DateTime2), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Boolean), @p78='?' (DbType = Int32), @p79='?' (Size = 4000), @p80='?' (DbType = DateTime2), @p81='?' (DbType = DateTime2), @p82='?' (DbType = DateTime2), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = Boolean), @p86='?' (DbType = Int32), @p87='?' (Size = 4000), @p88='?' (DbType = DateTime2), @p89='?' (DbType = DateTime2), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (DbType = Boolean), @p94='?' (DbType = Int32), @p95='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HotelReservations] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 1),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 2),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 3),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 4),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 5),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 6),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, 7),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 8),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, 9),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, 10),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 11)) AS i ([CheckInDate], [CheckOutDate], [DeletedAt], [DriverId], [HotelId], [IsDeleted], [RoomId], [Status], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CheckInDate], [CheckOutDate], [DeletedAt], [DriverId], [HotelId], [IsDeleted], [RoomId], [Status])
VALUES (i.[CheckInDate], i.[CheckOutDate], i.[DeletedAt], i.[DriverId], i.[HotelId], i.[IsDeleted], i.[RoomId], i.[Status])
OUTPUT INSERTED.[HotelReservationId], i._Position;
2025-04-16 21:19:29.282 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 21:19:29.345 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 21:19:29.440 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 21:19:29.462 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 21:19:29.465 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:19:29.467 +02:00 [INF] Hosting environment: Development
2025-04-16 21:19:29.468 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 21:19:37.046 +02:00 [INF] Application is shutting down...
2025-04-16 21:19:47.496 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:19:47.571 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:19:47.583 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:19:47.587 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:19:47.603 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:19:47.624 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:19:47.629 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 21:19:47.928 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:47.953 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:47.967 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:47.995 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:19:47.999 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 21:19:48.118 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 21:19:48.231 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 21:19:48.377 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 21:19:48.420 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:19:48.429 +02:00 [INF] Hosting environment: Development
2025-04-16 21:19:48.431 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 21:19:49.064 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 21:19:49.273 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 216.3515ms
2025-04-16 21:19:49.284 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:19:49.290 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 21:19:49.296 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 11.5923ms
2025-04-16 21:19:49.335 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.8064ms
2025-04-16 21:19:49.388 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 21:19:49.469 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.3883ms
2025-04-16 21:20:04.984 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/HotelReservation/check-expired - null 0
2025-04-16 21:20:04.994 +02:00 [INF] CORS policy execution successful.
2025-04-16 21:20:05.000 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations (TICKIFY.API)'
2025-04-16 21:20:05.023 +02:00 [INF] Route matched with {action = "CheckExpiredReservations", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckExpiredReservations(System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 21:20:05.128 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < @__now_0
2025-04-16 21:20:05.142 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-16 21:20:05.150 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations (TICKIFY.API) in 120.1906ms
2025-04-16 21:20:05.154 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.CheckExpiredReservations (TICKIFY.API)'
2025-04-16 21:20:05.159 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/HotelReservation/check-expired - 200 null text/plain; charset=utf-8 175.4325ms
2025-04-16 21:21:00.885 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:21:00.958 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:21:00.970 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:21:00.977 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:21:00.994 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:21:01.012 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:21:01.018 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 21:21:01.290 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:21:01.309 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:21:01.319 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:21:01.341 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:21:01.346 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 21:21:01.453 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 21:21:01.558 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 21:21:01.710 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 21:21:01.750 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:21:01.753 +02:00 [INF] Hosting environment: Development
2025-04-16 21:21:01.754 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 21:21:02.352 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 21:21:02.558 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 210.7019ms
2025-04-16 21:21:02.562 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 21:21:02.571 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:21:02.589 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 14.2425ms
2025-04-16 21:21:02.626 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.2504ms
2025-04-16 21:21:02.690 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 21:21:02.780 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.8497ms
2025-04-16 21:21:13.294 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5032/api/HotelReservation/12 - null null
2025-04-16 21:21:13.306 +02:00 [INF] CORS policy execution successful.
2025-04-16 21:21:13.311 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.DeleteReservation (TICKIFY.API)'
2025-04-16 21:21:13.335 +02:00 [INF] Route matched with {action = "DeleteReservation", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteReservation(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 21:21:13.448 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < @__now_0
2025-04-16 21:21:13.477 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [h0].[HotelId], [h0].[Location], [h0].[Name], [h0].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [HotelReservations] AS [h]
INNER JOIN [Hotels] AS [h0] ON [h].[HotelId] = [h0].[HotelId]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
INNER JOIN [Drivers] AS [d] ON [h].[DriverId] = [d].[DriverId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[HotelReservationId] = @__id_0
2025-04-16 21:21:13.608 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelReservationId], [t].[CheckInDate], [t].[CheckOutDate], [t].[DeletedAt], [t].[DriverId], [t].[HotelId], [t].[IsDeleted], [t].[RoomId], [t].[Status], [t0].[ReservationDetailsId], [t0].[DeletedAt], [t0].[HotelReservationId], [t0].[IsDeleted], [t0].[RoomId]
FROM (
    SELECT TOP(1) [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status]
    FROM [HotelReservations] AS [h]
    WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[HotelReservationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[ReservationDetailsId], [r].[DeletedAt], [r].[HotelReservationId], [r].[IsDeleted], [r].[RoomId]
    FROM [ReservationDetails] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[HotelReservationId] = [t0].[HotelReservationId]
ORDER BY [t].[HotelReservationId]
2025-04-16 21:21:13.698 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [HotelReservations] SET [DeletedAt] = @p0, [IsDeleted] = @p1, [Status] = @p2
OUTPUT 1
WHERE [HotelReservationId] = @p3;
2025-04-16 21:21:13.718 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-16 21:21:13.724 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.DeleteReservation (TICKIFY.API) in 381.5874ms
2025-04-16 21:21:13.728 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.DeleteReservation (TICKIFY.API)'
2025-04-16 21:21:13.734 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5032/api/HotelReservation/12 - 204 null null 439.9138ms
2025-04-16 21:21:29.511 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/HotelReservation/12 - null null
2025-04-16 21:21:29.521 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelReservationController.GetReservationById (TICKIFY.API)'
2025-04-16 21:21:29.528 +02:00 [INF] Route matched with {action = "GetReservationById", controller = "HotelReservation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReservationById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelReservationController (TICKIFY.API).
2025-04-16 21:21:29.540 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < @__now_0
2025-04-16 21:21:29.548 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [h0].[HotelId], [h0].[Location], [h0].[Name], [h0].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [HotelReservations] AS [h]
INNER JOIN [Hotels] AS [h0] ON [h].[HotelId] = [h0].[HotelId]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
INNER JOIN [Drivers] AS [d] ON [h].[DriverId] = [d].[DriverId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[HotelReservationId] = @__id_0
2025-04-16 21:21:29.556 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-04-16 21:21:29.561 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelReservationController.GetReservationById (TICKIFY.API) in 28.7093ms
2025-04-16 21:21:29.564 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelReservationController.GetReservationById (TICKIFY.API)'
2025-04-16 21:21:29.566 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/HotelReservation/12 - 404 null text/plain; charset=utf-8 54.4754ms
2025-04-16 21:27:31.385 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:27:31.461 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:27:31.473 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:27:31.477 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:27:31.493 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:27:31.513 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:27:31.518 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 21:27:31.789 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:27:31.807 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:27:31.816 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:27:31.841 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 21:27:31.846 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 21:27:31.954 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 21:27:32.056 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 21:27:32.205 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 21:27:32.268 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:27:32.277 +02:00 [INF] Hosting environment: Development
2025-04-16 21:27:32.279 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 21:27:32.834 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 21:27:33.042 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 213.8538ms
2025-04-16 21:27:33.047 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 21:27:33.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:27:33.075 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 20.4899ms
2025-04-16 21:27:33.099 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.1881ms
2025-04-16 21:27:33.147 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 21:27:33.239 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.5415ms
2025-04-16 22:07:44.116 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:07:44.219 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:07:44.237 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:07:44.246 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:07:44.274 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:07:44.303 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:07:44.311 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:07:44.728 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:07:44.756 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:07:44.771 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:07:44.805 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:07:44.813 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:07:44.957 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:07:45.082 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:07:45.277 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:07:45.393 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:07:45.397 +02:00 [INF] Hosting environment: Development
2025-04-16 22:07:45.401 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:07:45.789 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:07:46.110 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 330.4035ms
2025-04-16 22:07:46.126 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:07:46.136 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:07:46.137 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 12.3085ms
2025-04-16 22:07:46.192 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.9763ms
2025-04-16 22:07:46.306 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:07:46.468 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 162.6086ms
2025-04-16 22:08:32.415 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Driver - application/json 99
2025-04-16 22:08:32.440 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:08:32.453 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API)'
2025-04-16 22:08:32.517 +02:00 [INF] Route matched with {action = "CreateDriver", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDriver(TICKIFY.API.Contracts.Requests.DriverReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-16 22:08:32.751 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-16 22:08:32.808 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API) in 274.5402ms
2025-04-16 22:08:32.816 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API)'
2025-04-16 22:08:32.823 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Driver - 400 null application/problem+json; charset=utf-8 410.0292ms
2025-04-16 22:08:54.331 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Driver - application/json 99
2025-04-16 22:08:54.351 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:08:54.355 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API)'
2025-04-16 22:08:54.362 +02:00 [INF] Route matched with {action = "CreateDriver", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDriver(TICKIFY.API.Contracts.Requests.DriverReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-16 22:08:54.608 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__driverReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__driverReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:08:54.635 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:08:54.647 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API) in 275.3718ms
2025-04-16 22:08:54.654 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API)'
2025-04-16 22:08:54.670 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Driver - 500 null application/problem+json; charset=utf-8 338.9507ms
2025-04-16 22:09:06.667 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Driver - application/json 97
2025-04-16 22:09:06.678 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:09:06.680 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API)'
2025-04-16 22:09:06.684 +02:00 [INF] Route matched with {action = "CreateDriver", controller = "Driver"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDriver(TICKIFY.API.Contracts.Requests.DriverReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.DriverController (TICKIFY.API).
2025-04-16 22:09:06.713 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__driverReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__driverReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:09:07.248 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 100), @p2='?' (DbType = Int32), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Drivers] ([CarType], [DriverName], [HotelId], [Price], [StarRating])
OUTPUT INSERTED.[DriverId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-16 22:09:07.330 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TICKIFY.API.Contracts.Drivers.DriverRes'.
2025-04-16 22:09:07.376 +02:00 [INF] Executed action TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API) in 685.0267ms
2025-04-16 22:09:07.383 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.DriverController.CreateDriver (TICKIFY.API)'
2025-04-16 22:09:07.389 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Driver - 201 null application/json; charset=utf-8 722.1514ms
2025-04-16 22:10:26.729 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 74
2025-04-16 22:10:26.743 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:10:26.746 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:10:26.757 +02:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateHotel(TICKIFY.API.Contracts.Requests.HotelReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:10:27.150 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API) in 384.0377ms
2025-04-16 22:10:27.157 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:10:27.163 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Hotels>()
    .Any(h => h.Name.Equals(
        value: __hotelReq_Name_0, 
        comparisonType: OrdinalIgnoreCase))' could not be translated. Additional information: Translation of the 'string.Equals' overload with a 'StringComparison' parameter is not supported. See https://go.microsoft.com/fwlink/?linkid=2129535 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.AnyAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at HotelServices.CreateHotelAsync(HotelReq hotelReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\HotelServices.cs:line 146
   at TICKIFY.API.Controllers.HotelController.CreateHotel(HotelReq hotelReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\HotelController.cs:line 80
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:10:27.238 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 500 null text/plain; charset=utf-8 508.644ms
2025-04-16 22:10:55.855 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 74
2025-04-16 22:10:55.871 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:10:55.874 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:10:55.880 +02:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateHotel(TICKIFY.API.Contracts.Requests.HotelReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:10:56.073 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API) in 183.6642ms
2025-04-16 22:10:56.081 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:10:56.089 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Hotels>()
    .Any(h => h.Name.Equals(
        value: __hotelReq_Name_0, 
        comparisonType: OrdinalIgnoreCase))' could not be translated. Additional information: Translation of the 'string.Equals' overload with a 'StringComparison' parameter is not supported. See https://go.microsoft.com/fwlink/?linkid=2129535 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.AnyAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at HotelServices.CreateHotelAsync(HotelReq hotelReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\HotelServices.cs:line 146
   at TICKIFY.API.Controllers.HotelController.CreateHotel(HotelReq hotelReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\HotelController.cs:line 80
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:10:56.127 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 500 null text/plain; charset=utf-8 271.3437ms
2025-04-16 22:12:43.306 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/4 - null null
2025-04-16 22:12:43.319 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelById (TICKIFY.API)'
2025-04-16 22:12:43.329 +02:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:12:43.455 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-04-16 22:12:43.477 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[Location], [t].[Name], [t].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM (
    SELECT TOP(1) [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
LEFT JOIN [Drivers] AS [d] ON [t].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [d].[DriverId]
2025-04-16 22:12:43.603 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Hotels.HotelByIdRes'.
2025-04-16 22:12:43.617 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelById (TICKIFY.API) in 278.8761ms
2025-04-16 22:12:43.623 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelById (TICKIFY.API)'
2025-04-16 22:12:43.627 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/4 - 200 null application/json; charset=utf-8 320.654ms
2025-04-16 22:13:15.319 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-name?name=ramada - null null
2025-04-16 22:13:15.339 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API)'
2025-04-16 22:13:15.351 +02:00 [INF] Route matched with {action = "GetHotelsByName", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByName(System.String, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:13:15.422 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-04-16 22:13:15.449 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
WHERE LOWER([h].[Name]) LIKE @__p_1
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:13:15.462 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:13:15.469 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API) in 108.2999ms
2025-04-16 22:13:15.477 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API)'
2025-04-16 22:13:15.483 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-name?name=ramada - 500 null application/problem+json; charset=utf-8 164.0004ms
2025-04-16 22:13:35.789 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=mansoura&starRating=1 - null null
2025-04-16 22:13:35.809 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:13:35.823 +02:00 [INF] Route matched with {action = "GetHotelsByLocationAndRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByLocationAndRating(System.String, Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:13:35.857 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-04-16 22:13:35.878 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:13:35.926 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:13:35.934 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API) in 101.2158ms
2025-04-16 22:13:35.941 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:13:35.947 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=mansoura&starRating=1 - 500 null application/problem+json; charset=utf-8 160.0861ms
2025-04-16 22:14:01.234 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=cairo&starRating=1 - null null
2025-04-16 22:14:01.249 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:14:01.252 +02:00 [INF] Route matched with {action = "GetHotelsByLocationAndRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByLocationAndRating(System.String, Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:14:01.267 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:14:01.293 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:14:01.301 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API) in 42.7577ms
2025-04-16 22:14:01.306 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:14:01.313 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=cairo&starRating=1 - 500 null application/problem+json; charset=utf-8 78.5186ms
2025-04-16 22:14:15.317 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=1 - null null
2025-04-16 22:14:15.326 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:14:15.330 +02:00 [INF] Route matched with {action = "GetHotelsByLocationAndRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByLocationAndRating(System.String, Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:14:15.343 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:14:15.356 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:14:15.363 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API) in 27.0015ms
2025-04-16 22:14:15.368 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:14:15.374 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=1 - 500 null application/problem+json; charset=utf-8 57.4916ms
2025-04-16 22:14:44.517 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - null null
2025-04-16 22:14:44.530 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:14:44.534 +02:00 [INF] Route matched with {action = "GetHotelsByLocationAndRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByLocationAndRating(System.String, Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:14:44.549 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:14:44.590 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TICKIFY.Data.Entities.Hotels, TICKIFY.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TICKIFY.API.Contracts.hotels.HotelRes, TICKIFY.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 22:14:44.611 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API) in 70.8684ms
2025-04-16 22:14:44.618 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:14:44.623 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=dubai&starRating=4 - 200 null application/json; charset=utf-8 106.4694ms
2025-04-16 22:23:05.167 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:23:05.266 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:23:05.284 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:23:05.293 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:23:05.314 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:23:05.341 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:23:05.349 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:23:05.727 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:23:05.755 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:23:05.768 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:23:05.809 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:23:05.817 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:23:05.966 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:23:06.112 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:23:06.357 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:23:06.426 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:23:06.437 +02:00 [INF] Hosting environment: Development
2025-04-16 22:23:06.440 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:23:07.049 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:23:07.369 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 334.2334ms
2025-04-16 22:23:07.381 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:23:07.391 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 10.6056ms
2025-04-16 22:23:07.400 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:23:07.450 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.4399ms
2025-04-16 22:23:07.528 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:23:07.636 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 107.3919ms
2025-04-16 22:23:48.078 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 74
2025-04-16 22:23:48.097 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:23:48.110 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:23:48.183 +02:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateHotel(TICKIFY.API.Contracts.Requests.HotelReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:23:48.492 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE LOWER([h].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:23:49.038 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Hotels] ([Location], [Name], [StarRating])
OUTPUT INSERTED.[HotelId]
VALUES (@p0, @p1, @p2);
2025-04-16 22:23:49.163 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TICKIFY.API.Contracts.hotels.HotelRes'.
2025-04-16 22:23:49.213 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API) in 1014.3912ms
2025-04-16 22:23:49.221 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:23:49.239 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 201 null application/json; charset=utf-8 1160.9934ms
2025-04-16 22:26:01.955 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:26:02.083 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:26:02.100 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:26:02.108 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:26:02.133 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:26:02.160 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:26:02.167 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:26:02.541 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:26:02.567 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:26:02.579 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:26:02.609 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:26:02.621 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:26:02.776 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:26:02.921 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:26:03.155 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:26:03.208 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:26:03.219 +02:00 [INF] Hosting environment: Development
2025-04-16 22:26:03.223 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:26:03.971 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:26:04.260 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 298.6009ms
2025-04-16 22:26:04.268 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:26:04.278 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:26:04.306 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 27.8443ms
2025-04-16 22:26:04.333 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.6907ms
2025-04-16 22:26:04.395 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:26:04.504 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.1555ms
2025-04-16 22:26:39.473 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 74
2025-04-16 22:26:39.498 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:26:39.512 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:26:39.576 +02:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateHotel(TICKIFY.API.Contracts.Requests.HotelReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:26:39.921 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE LOWER([h].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:26:39.970 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:26:40.035 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API) in 442.7585ms
2025-04-16 22:26:40.043 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:26:40.060 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 500 null application/problem+json; charset=utf-8 586.9848ms
2025-04-16 22:27:03.842 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Hotel - application/json 74
2025-04-16 22:27:03.866 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:27:03.870 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:27:03.876 +02:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateHotel(TICKIFY.API.Contracts.Requests.HotelReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:27:03.907 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE LOWER([h].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:27:04.365 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Hotels] ([Location], [Name], [StarRating])
OUTPUT INSERTED.[HotelId]
VALUES (@p0, @p1, @p2);
2025-04-16 22:27:04.469 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TICKIFY.API.Contracts.hotels.HotelRes'.
2025-04-16 22:27:04.521 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API) in 634.7806ms
2025-04-16 22:27:04.529 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.CreateHotel (TICKIFY.API)'
2025-04-16 22:27:04.535 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Hotel - 201 null application/json; charset=utf-8 693.0376ms
2025-04-16 22:27:19.183 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-name?name=rrrrrr - null null
2025-04-16 22:27:19.193 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API)'
2025-04-16 22:27:19.205 +02:00 [INF] Route matched with {action = "GetHotelsByName", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByName(System.String, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:27:19.327 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-04-16 22:27:19.347 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
WHERE LOWER([h].[Name]) LIKE @__p_1
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:27:19.361 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:27:19.369 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API) in 154.2683ms
2025-04-16 22:27:19.375 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API)'
2025-04-16 22:27:19.380 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-name?name=rrrrrr - 500 null application/problem+json; charset=utf-8 196.8592ms
2025-04-16 22:27:29.164 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-name?name=ramsis - null null
2025-04-16 22:27:29.177 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API)'
2025-04-16 22:27:29.181 +02:00 [INF] Route matched with {action = "GetHotelsByName", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByName(System.String, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:27:29.198 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
WHERE LOWER([h].[Name]) LIKE @__p_1
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:27:29.249 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TICKIFY.Data.Entities.Hotels, TICKIFY.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TICKIFY.API.Contracts.hotels.SearchHotelRes, TICKIFY.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 22:27:29.273 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API) in 83.4169ms
2025-04-16 22:27:29.278 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByName (TICKIFY.API)'
2025-04-16 22:27:29.285 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-name?name=ramsis - 200 null application/json; charset=utf-8 121.1011ms
2025-04-16 22:28:24.462 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=mansoura&starRating=6 - null null
2025-04-16 22:28:24.480 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:28:24.495 +02:00 [INF] Route matched with {action = "GetHotelsByLocationAndRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsByLocationAndRating(System.String, Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:28:24.546 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-04-16 22:28:24.564 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[Location], [h].[Name], [h].[StarRating], [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Hotels] AS [h]
LEFT JOIN [Drivers] AS [d] ON [h].[HotelId] = [d].[HotelId]
LEFT JOIN [Rooms] AS [r] ON [h].[HotelId] = [r].[HotelId]
ORDER BY [h].[HotelId], [d].[DriverId]
2025-04-16 22:28:24.682 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:28:24.688 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API) in 182.6747ms
2025-04-16 22:28:24.692 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelsByLocationAndRating (TICKIFY.API)'
2025-04-16 22:28:24.697 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/search/by-location-rating?location=mansoura&starRating=6 - 500 null application/problem+json; charset=utf-8 234.9354ms
2025-04-16 22:28:38.350 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/api/Hotel/7/drivers - null null
2025-04-16 22:28:38.358 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelDrivers (TICKIFY.API)'
2025-04-16 22:28:38.369 +02:00 [INF] Route matched with {action = "GetHotelDrivers", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelDrivers(Int32, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.HotelController (TICKIFY.API).
2025-04-16 22:28:38.398 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__hotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:28:38.422 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DriverId], [d].[CarType], [d].[DriverName], [d].[HotelId], [d].[Price], [d].[StarRating]
FROM [Drivers] AS [d]
WHERE [d].[HotelId] = @__hotelId_0
2025-04-16 22:28:38.444 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TICKIFY.Data.Entities.Drivers, TICKIFY.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TICKIFY.API.Contracts.Drivers.DriverRes, TICKIFY.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 22:28:38.460 +02:00 [INF] Executed action TICKIFY.API.Controllers.HotelController.GetHotelDrivers (TICKIFY.API) in 81.8068ms
2025-04-16 22:28:38.471 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.HotelController.GetHotelDrivers (TICKIFY.API)'
2025-04-16 22:28:38.475 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/api/Hotel/7/drivers - 200 null application/json; charset=utf-8 125.7164ms
2025-04-16 22:29:39.872 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room/available-rooms - application/json 109
2025-04-16 22:29:39.892 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:29:39.906 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.GetAvailableRooms (TICKIFY.API)'
2025-04-16 22:29:39.919 +02:00 [INF] Route matched with {action = "GetAvailableRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableRooms(TICKIFY.API.Contracts.Rooms.RoomAvailabilityRequest) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:29:39.998 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__request_HotelId_0='?' (DbType = Int32), @__request_CheckInDate_1='?' (DbType = DateTime2), @__request_CheckOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [Rooms] AS [r]
WHERE [r].[HotelId] = @__request_HotelId_0 AND NOT EXISTS (
    SELECT 1
    FROM [HotelReservations] AS [h]
    WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[RoomId] = [r].[RoomId] AND @__request_CheckInDate_1 < [h].[CheckOutDate] AND @__request_CheckOutDate_2 > [h].[CheckInDate])
2025-04-16 22:29:40.018 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TICKIFY.Data.Entities.Rooms, TICKIFY.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TICKIFY.API.Contracts.Rooms.RoomDto, TICKIFY.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 22:29:40.062 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.GetAvailableRooms (TICKIFY.API) in 132.9911ms
2025-04-16 22:29:40.068 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.GetAvailableRooms (TICKIFY.API)'
2025-04-16 22:29:40.074 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room/available-rooms - 200 null application/json; charset=utf-8 202.9705ms
2025-04-16 22:30:26.512 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:30:26.524 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:30:26.528 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:30:26.537 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:30:26.660 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Rooms] ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type])
OUTPUT INSERTED.[RoomId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-16 22:30:26.720 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TICKIFY.API.Persistence.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Rooms_Hotels_HotelId". The conflict occurred in database "TickifyDb", table "dbo.Hotels", column 'HotelId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1406cd4b-0373-4d2e-bef0-5c2164a3990b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Rooms_Hotels_HotelId". The conflict occurred in database "TickifyDb", table "dbo.Hotels", column 'HotelId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1406cd4b-0373-4d2e-bef0-5c2164a3990b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-16 22:30:27.150 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 603.3072ms
2025-04-16 22:30:27.157 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:30:27.166 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Rooms_Hotels_HotelId". The conflict occurred in database "TickifyDb", table "dbo.Hotels", column 'HotelId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1406cd4b-0373-4d2e-bef0-5c2164a3990b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TICKIFY.API.Services.Implementations.RoomServices.CreateRoomAsync(RoomReq roomReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Services\Implementations\RoomServices.cs:line 165
   at TICKIFY.API.Controllers.RoomController.CreateRoom(RoomReq roomReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\RoomController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:30:27.238 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 500 null text/plain; charset=utf-8 725.9281ms
2025-04-16 22:31:10.092 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 97
2025-04-16 22:31:10.116 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:31:10.119 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:31:10.122 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:31:10.137 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Rooms] ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type])
OUTPUT INSERTED.[RoomId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-16 22:31:10.160 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TICKIFY.API.Contracts.Rooms.HotelRoomsRes'.
2025-04-16 22:31:10.169 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 40.9899ms
2025-04-16 22:31:10.176 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:31:10.181 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 201 null application/json; charset=utf-8 89.2627ms
2025-04-16 22:31:40.925 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:31:40.938 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:31:40.941 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:31:40.945 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:31:40.963 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Rooms] ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type])
OUTPUT INSERTED.[RoomId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-16 22:31:40.983 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TICKIFY.API.Contracts.Rooms.HotelRoomsRes'.
2025-04-16 22:31:40.991 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 40.3581ms
2025-04-16 22:31:40.998 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:31:41.003 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 201 null application/json; charset=utf-8 78.2594ms
2025-04-16 22:36:23.211 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:36:23.323 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:36:23.342 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:36:23.350 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:36:23.377 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:36:23.411 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:36:23.418 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:36:23.831 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:36:23.864 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:36:23.881 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:36:23.923 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:36:23.930 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:36:24.080 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:36:24.234 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:36:24.433 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:36:24.487 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:36:24.498 +02:00 [INF] Hosting environment: Development
2025-04-16 22:36:24.502 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:36:25.409 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:36:25.732 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 332.6951ms
2025-04-16 22:36:25.747 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:36:25.757 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:36:25.758 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 11.0088ms
2025-04-16 22:36:25.807 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.896ms
2025-04-16 22:36:25.967 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:36:26.152 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 184.8651ms
2025-04-16 22:37:03.431 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:37:03.446 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:37:03.455 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:37:03.506 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:37:03.852 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:37:03.879 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32), @__roomReq_RoomNumber_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]
        WHERE [r].[HotelId] = @__roomReq_HotelId_0 AND [r].[RoomNumber] = @__roomReq_RoomNumber_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:39:44.321 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 160798.7759ms
2025-04-16 22:39:44.328 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:39:44.336 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at TICKIFY.API.Controllers.RoomController.CreateRoom(RoomReq roomReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\RoomController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:39:44.388 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 500 null text/plain; charset=utf-8 160956.7852ms
2025-04-16 22:41:13.639 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:41:13.752 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:41:13.768 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:41:13.777 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:41:13.802 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:41:13.831 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:41:13.838 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:41:14.206 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:41:14.243 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:41:14.268 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:41:14.315 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:41:14.330 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:41:14.492 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:41:14.648 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:41:14.840 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:41:14.902 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:41:14.906 +02:00 [INF] Hosting environment: Development
2025-04-16 22:41:14.911 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:41:15.486 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:41:15.841 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 366.0257ms
2025-04-16 22:41:15.855 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:41:15.887 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:41:15.928 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 41.4371ms
2025-04-16 22:41:15.965 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.808ms
2025-04-16 22:41:16.043 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:41:16.163 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 120.3592ms
2025-04-16 22:41:29.625 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:41:29.647 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:41:29.658 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:41:29.715 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:41:30.037 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:41:30.065 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32), @__roomReq_RoomNumber_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]
        WHERE [r].[HotelId] = @__roomReq_HotelId_0 AND [r].[RoomNumber] = @__roomReq_RoomNumber_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:41:30.100 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'null'.
2025-04-16 22:41:30.114 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 384.4796ms
2025-04-16 22:41:30.122 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:41:30.138 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 400 0 null 512.8555ms
2025-04-16 22:44:39.931 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:44:40.028 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:44:40.046 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:44:40.054 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:44:40.088 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:44:40.119 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:44:40.126 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:44:40.522 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:44:40.549 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:44:40.564 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:44:40.599 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:44:40.609 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:44:40.764 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:44:40.903 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:44:41.128 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:44:41.198 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:44:41.202 +02:00 [INF] Hosting environment: Development
2025-04-16 22:44:41.205 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:44:41.479 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:44:41.848 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 379.6175ms
2025-04-16 22:44:41.895 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:44:41.908 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 13.3448ms
2025-04-16 22:44:41.917 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:44:41.970 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.0941ms
2025-04-16 22:44:42.053 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:44:42.168 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 115.0138ms
2025-04-16 22:45:13.146 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:45:13.165 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:45:13.180 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:45:13.247 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:45:13.563 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:45:13.591 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32), @__roomReq_RoomNumber_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]
        WHERE [r].[HotelId] = @__roomReq_HotelId_0 AND [r].[RoomNumber] = @__roomReq_RoomNumber_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:52:45.815 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:52:45.928 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:52:45.946 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:52:45.956 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:52:45.985 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:52:46.015 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:52:46.022 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 22:52:46.442 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:52:46.477 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:52:46.495 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:52:46.551 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:52:46.560 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 22:52:46.745 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 22:52:46.890 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 22:52:47.099 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 22:52:47.157 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:52:47.161 +02:00 [INF] Hosting environment: Development
2025-04-16 22:52:47.165 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 22:52:47.712 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 22:52:48.055 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 361.9272ms
2025-04-16 22:52:48.091 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:52:48.129 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 38.6529ms
2025-04-16 22:52:48.144 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 22:52:48.196 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.6643ms
2025-04-16 22:52:48.285 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 22:52:48.436 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.2717ms
2025-04-16 22:53:06.448 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:53:06.471 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:53:06.487 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:53:06.548 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:53:06.896 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:53:06.929 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32), @__roomReq_RoomNumber_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]
        WHERE [r].[HotelId] = @__roomReq_HotelId_0 AND [r].[RoomNumber] = @__roomReq_RoomNumber_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:53:20.751 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 14188.1913ms
2025-04-16 22:53:20.757 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:53:20.766 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at TICKIFY.API.Controllers.RoomController.CreateRoom(RoomReq roomReq, CancellationToken cancellationToken) in D:\my programmes\TICKIFY\TICKIFY.API\Controllers\RoomController.cs:line 74
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:53:20.829 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 500 null text/plain; charset=utf-8 14381.5333ms
2025-04-16 22:54:23.196 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 22:54:23.211 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:54:23.214 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:54:23.218 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:54:23.255 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:54:23.271 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32), @__roomReq_RoomNumber_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]
        WHERE [r].[HotelId] = @__roomReq_HotelId_0 AND [r].[RoomNumber] = @__roomReq_RoomNumber_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:54:23.850 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Rooms] ([BedCount], [DateIn], [DateOut], [HotelId], [PricePerNight], [RoomNumber], [Status], [Type])
OUTPUT INSERTED.[RoomId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-16 22:54:23.947 +02:00 [INF] Executing OkObjectResult, writing value of type 'TICKIFY.API.Contracts.Rooms.HotelRoomsRes'.
2025-04-16 22:54:23.963 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 738.581ms
2025-04-16 22:54:23.968 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:54:23.973 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 200 null application/json; charset=utf-8 776.9005ms
2025-04-16 22:54:36.409 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 101
2025-04-16 22:54:36.420 +02:00 [INF] CORS policy execution successful.
2025-04-16 22:54:36.423 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:54:36.428 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 22:54:36.451 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 22:54:36.464 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:54:36.509 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 74.3035ms
2025-04-16 22:54:36.516 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 22:54:36.522 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 500 null application/problem+json; charset=utf-8 113.7578ms
2025-04-16 23:01:09.261 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:01:09.370 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:01:09.394 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:01:09.410 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:01:09.448 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:01:09.475 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 23:01:09.481 +02:00 [INF] Migrations Applied Successfully.
2025-04-16 23:01:09.857 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 23:01:09.890 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 23:01:09.909 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Drivers] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 23:01:09.955 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HotelReservations] AS [h]
        WHERE [h].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 23:01:09.968 +02:00 [INF] Data Seeding Completed Successfully.
2025-04-16 23:01:10.148 +02:00 [INF] Reservation Expiry Service running.
2025-04-16 23:01:10.292 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelReservationId], [h].[CheckInDate], [h].[CheckOutDate], [h].[DeletedAt], [h].[DriverId], [h].[HotelId], [h].[IsDeleted], [h].[RoomId], [h].[Status], [r].[RoomId], [r].[BedCount], [r].[DateIn], [r].[DateOut], [r].[HotelId], [r].[PricePerNight], [r].[RoomNumber], [r].[Status], [r].[Type]
FROM [HotelReservations] AS [h]
INNER JOIN [Rooms] AS [r] ON [h].[RoomId] = [r].[RoomId]
WHERE [h].[IsDeleted] = CAST(0 AS bit) AND [h].[IsDeleted] = CAST(0 AS bit) AND [h].[Status] = N'Confirmed' AND [h].[CheckOutDate] < GETUTCDATE()
2025-04-16 23:01:10.556 +02:00 [INF] Now listening on: http://localhost:5032
2025-04-16 23:01:10.651 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 23:01:10.663 +02:00 [INF] Hosting environment: Development
2025-04-16 23:01:10.667 +02:00 [INF] Content root path: D:\my programmes\TICKIFY\TICKIFY.API
2025-04-16 23:01:11.180 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/index.html - null null
2025-04-16 23:01:11.802 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/index.html - 200 null text/html;charset=utf-8 621.1958ms
2025-04-16 23:01:11.818 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_vs/browserLink - null null
2025-04-16 23:01:11.836 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 23:01:11.865 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_framework/aspnetcore-browser-refresh.js - 200 13757 application/javascript; charset=utf-8 27.7931ms
2025-04-16 23:01:11.932 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/_vs/browserLink - 200 null text/javascript; charset=UTF-8 115.9613ms
2025-04-16 23:01:12.003 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - null null
2025-04-16 23:01:12.171 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5032/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 168.5382ms
2025-04-16 23:01:23.138 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5032/api/Room - application/json 99
2025-04-16 23:01:23.158 +02:00 [INF] CORS policy execution successful.
2025-04-16 23:01:23.173 +02:00 [INF] Executing endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 23:01:23.234 +02:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(TICKIFY.API.Contracts.Rooms.RoomReq, System.Threading.CancellationToken) on controller TICKIFY.API.Controllers.RoomController (TICKIFY.API).
2025-04-16 23:01:23.555 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Hotels] AS [h]
        WHERE [h].[HotelId] = @__roomReq_HotelId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 23:01:23.584 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__roomReq_HotelId_0='?' (DbType = Int32), @__roomReq_RoomNumber_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Rooms] AS [r]
        WHERE [r].[HotelId] = @__roomReq_HotelId_0 AND [r].[RoomNumber] = @__roomReq_RoomNumber_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-16 23:01:23.617 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 23:01:23.674 +02:00 [INF] Executed action TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API) in 423.107ms
2025-04-16 23:01:23.680 +02:00 [INF] Executed endpoint 'TICKIFY.API.Controllers.RoomController.CreateRoom (TICKIFY.API)'
2025-04-16 23:01:23.692 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5032/api/Room - 500 null application/problem+json; charset=utf-8 553.2993ms
